(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[247],{9756:function(e,s,t){Promise.resolve().then(t.bind(t,5952))},5952:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return N}});var a=t(7437),l=t(2265),r=t(9376),n=t(9289),i=t(2548),c=t(2594),d=t(1601),m=t(1556),o=t(4565),x=t(3836),u=t(2553),h=t(1591),g=t(3519),p=t(8184),b=t(954),v=t(4508);let y=[{value:"",label:"All Types"},{value:"bus",label:"Bus"},{value:"van",label:"Van"},{value:"car",label:"Car"},{value:"boat",label:"Boat"}],f=[{value:"",label:"All Statuses"},{value:"active",label:"Active"},{value:"maintenance",label:"Maintenance"},{value:"inactive",label:"Inactive"}],j=e=>{let{vehicle:s,onEdit:t,onDelete:l,onView:r,onStatusChange:m}=e,o=async e=>{try{m(s,e)}catch(e){}};return(0,a.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6 card-hover",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-primary-100 rounded-lg flex items-center justify-center",children:(0,a.jsx)(n.Z,{className:"w-5 h-5 text-primary-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:s.plateNumber}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:[s.brand," ",s.model," (",s.year,")"]})]})]}),(0,a.jsxs)(u.v,{as:"div",className:"relative",children:[(0,a.jsx)(u.v.Button,{className:"p-2 text-gray-400 hover:text-gray-600 rounded-lg hover:bg-gray-50",children:(0,a.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,a.jsx)("path",{d:"M10 6a2 2 0 110-4 2 2 0 010 4zM10 12a2 2 0 110-4 2 2 0 010 4zM10 18a2 2 0 110-4 2 2 0 010 4z"})})}),(0,a.jsxs)(u.v.Items,{className:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none z-10",children:[(0,a.jsx)(u.v.Item,{children:e=>{let{active:t}=e;return(0,a.jsxs)("button",{onClick:()=>r(s),className:(0,v.cn)(t?"bg-gray-50":"","flex w-full items-center px-4 py-2 text-sm text-gray-700"),children:[(0,a.jsx)(i.Z,{className:"mr-3 h-4 w-4"}),"View Details"]})}}),(0,a.jsx)(u.v.Item,{children:e=>{let{active:l}=e;return(0,a.jsxs)("button",{onClick:()=>t(s),className:(0,v.cn)(l?"bg-gray-50":"","flex w-full items-center px-4 py-2 text-sm text-gray-700"),children:[(0,a.jsx)(c.Z,{className:"mr-3 h-4 w-4"}),"Edit Vehicle"]})}}),(0,a.jsx)(u.v.Item,{children:e=>{let{active:t}=e;return(0,a.jsx)("button",{onClick:()=>o("active"===s.status?"maintenance":"active"),className:(0,v.cn)(t?"bg-gray-50":"","flex w-full items-center px-4 py-2 text-sm text-gray-700"),children:"active"===s.status?"Set Maintenance":"Set Active"})}}),(0,a.jsx)(u.v.Item,{children:e=>{let{active:t}=e;return(0,a.jsxs)("button",{onClick:()=>l(s),className:(0,v.cn)(t?"bg-gray-50":"","flex w-full items-center px-4 py-2 text-sm text-red-600"),children:[(0,a.jsx)(d.Z,{className:"mr-3 h-4 w-4"}),"Delete Vehicle"]})}})]})]})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-500",children:"Type:"}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-900 capitalize",children:s.type})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-500",children:"Capacity:"}),(0,a.jsxs)("span",{className:"text-sm font-medium text-gray-900",children:[s.capacity.passengers," passengers"]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-500",children:"Status:"}),(0,a.jsx)("span",{className:(0,v.cn)("inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",(0,v.z2)(s.status)),children:s.status.charAt(0).toUpperCase()+s.status.slice(1)})]}),s.driver&&(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-500",children:"Driver:"}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-900",children:s.driver.name})]}),(0,a.jsx)("div",{className:"pt-3 border-t border-gray-200",children:(0,a.jsxs)("span",{className:"text-xs text-gray-500",children:["Added ",(0,v.p6)(s.createdAt)]})})]})]})};function N(){let e=(0,r.useRouter)(),[s,t]=(0,l.useState)(""),[i,c]=(0,l.useState)(!1),{vehicles:d,pagination:u,filters:N,isLoading:w,fetchVehicles:k,setFilters:C,setPagination:Z,updateVehicleStatus:_,deleteVehicle:E}=(0,b.bW)(),{user:A}=(0,b.tN)();(0,l.useEffect)(()=>{k()},[k]);let S=e=>{t(e),C({...N,search:e})},V=(e,s)=>{C({...N,[e]:s||void 0})},M=async(e,s)=>{try{await _(e._id,s)}catch(e){}},L=async e=>{if(window.confirm("Are you sure you want to delete vehicle ".concat(e.plateNumber,"? This action cannot be undone.")))try{await E(e._id)}catch(e){}},z=s=>{e.push("/dashboard/vehicles/".concat(s._id,"/edit"))},B=s=>{e.push("/dashboard/vehicles/".concat(s._id))},D=e=>{Z(e)};return w&&0===d.length?(0,a.jsxs)("div",{className:"min-h-screen",children:[(0,a.jsx)(h.Z,{title:"Vehicles",subtitle:"Manage your fleet of vehicles"}),(0,a.jsx)("div",{className:"p-6",children:(0,a.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,a.jsx)(g.Z,{size:"lg"})})})]}):(0,a.jsxs)("div",{className:"min-h-screen",children:[(0,a.jsx)(h.Z,{title:"Vehicles",subtitle:"Manage your fleet of vehicles and drivers"}),(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(m.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,a.jsx)("input",{type:"text",placeholder:"Search vehicles...",value:s,onChange:e=>S(e.target.value),className:"pl-9 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 w-64"})]}),(0,a.jsxs)("button",{onClick:()=>c(!i),className:"btn-secondary flex items-center",children:[(0,a.jsx)(o.Z,{className:"h-4 w-4 mr-2"}),"Filters"]})]}),(0,a.jsxs)("button",{onClick:()=>e.push("/dashboard/vehicles/new"),className:"btn-primary flex items-center",children:[(0,a.jsx)(x.Z,{className:"h-4 w-4 mr-2"}),"Add Vehicle"]})]}),i&&(0,a.jsx)("div",{className:"bg-white rounded-lg border border-gray-200 p-4 mb-6",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Type"}),(0,a.jsx)("select",{value:N.type||"",onChange:e=>V("type",e.target.value),className:"form-input",children:y.map(e=>(0,a.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),(0,a.jsx)("select",{value:N.status||"",onChange:e=>V("status",e.target.value),className:"form-input",children:f.map(e=>(0,a.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,a.jsx)("div",{className:"flex items-end",children:(0,a.jsx)("button",{onClick:()=>C({}),className:"btn-secondary",children:"Clear Filters"})})]})}),d.length>0?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-6",children:d.map(e=>(0,a.jsx)(j,{vehicle:e,onEdit:z,onDelete:L,onView:B,onStatusChange:M},e._id))}),u.pages>1&&(0,a.jsxs)("div",{className:"flex items-center justify-between border-t border-gray-200 bg-white px-4 py-3 sm:px-6",children:[(0,a.jsxs)("div",{className:"flex flex-1 justify-between sm:hidden",children:[(0,a.jsx)("button",{onClick:()=>D(u.page-1),disabled:1===u.page,className:"relative inline-flex items-center rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50",children:"Previous"}),(0,a.jsx)("button",{onClick:()=>D(u.page+1),disabled:u.page===u.pages,className:"relative ml-3 inline-flex items-center rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50",children:"Next"})]}),(0,a.jsxs)("div",{className:"hidden sm:flex sm:flex-1 sm:items-center sm:justify-between",children:[(0,a.jsx)("div",{children:(0,a.jsxs)("p",{className:"text-sm text-gray-700",children:["Showing"," ",(0,a.jsx)("span",{className:"font-medium",children:(u.page-1)*u.limit+1})," ","to"," ",(0,a.jsx)("span",{className:"font-medium",children:Math.min(u.page*u.limit,u.total)})," ","of ",(0,a.jsx)("span",{className:"font-medium",children:u.total})," vehicles"]})}),(0,a.jsx)("div",{className:"flex space-x-2",children:Array.from({length:u.pages},(e,s)=>s+1).map(e=>(0,a.jsx)("button",{onClick:()=>D(e),className:(0,v.cn)("relative inline-flex items-center px-4 py-2 text-sm font-medium rounded-md",e===u.page?"bg-primary-600 text-white":"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50"),children:e},e))})]})]})]}):(0,a.jsx)(p.Z,{title:"No vehicles found",description:"Get started by adding your first vehicle to the fleet.",actionLabel:"Add Vehicle",onAction:()=>e.push("/dashboard/vehicles/new"),icon:n.Z})]})]})}},8184:function(e,s,t){"use strict";t.d(s,{Z:function(){return n}});var a=t(7437),l=t(3145),r=t(3836);function n(e){let{title:s,description:t,actionLabel:n,onAction:i,icon:c,imageSrc:d}=e;return(0,a.jsx)("div",{className:"text-center py-12",children:(0,a.jsxs)("div",{className:"mx-auto max-w-md",children:[d?(0,a.jsx)(l.default,{src:d,alt:"Empty state",width:200,height:200,className:"mx-auto mb-6"}):c?(0,a.jsx)(c,{className:"mx-auto h-12 w-12 text-gray-400 mb-6"}):(0,a.jsx)("div",{className:"mx-auto h-12 w-12 bg-gray-100 rounded-lg flex items-center justify-center mb-6",children:(0,a.jsx)("span",{className:"text-2xl text-gray-400",children:"\uD83D\uDCCB"})}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:s}),(0,a.jsx)("p",{className:"text-gray-500 mb-6",children:t}),n&&i&&(0,a.jsxs)("button",{type:"button",onClick:i,className:"btn-primary inline-flex items-center",children:[(0,a.jsx)(r.Z,{className:"h-4 w-4 mr-2","aria-hidden":"true"}),n]})]})})}},1591:function(e,s,t){"use strict";t.d(s,{Z:function(){return d}});var a=t(7437),l=t(2265),r=t(1556),n=t(3121),i=t(954),c=t(4508);function d(e){var s;let{title:t,subtitle:d}=e,[m,o]=(0,l.useState)(""),{user:x}=(0,i.tN)(),{subscription:u}=(0,i.ZO)();return(0,a.jsx)("div",{className:"bg-white border-b border-gray-200 px-6 py-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[t&&(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:t}),d&&(0,a.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:d})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("div",{className:"relative hidden md:block",children:[(0,a.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,a.jsx)(r.Z,{className:"h-4 w-4 text-gray-400"})}),(0,a.jsx)("input",{type:"text",placeholder:"Search...",value:m,onChange:e=>o(e.target.value),className:"block pl-9 pr-3 py-2 border border-gray-300 rounded-md text-sm placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 w-64"})]}),(0,a.jsx)("div",{className:"hidden sm:block",children:(0,a.jsx)("span",{className:(0,c.cn)("inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",(()=>{if(!u)return"bg-gray-100 text-gray-800";switch(u.status){case"active":return"bg-green-100 text-green-800";case"pending_payment":return"bg-yellow-100 text-yellow-800";case"pending_approval":return"bg-blue-100 text-blue-800";case"expired":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}})()),children:u?u.status.replace("_"," ").replace(/\b\w/g,e=>e.toUpperCase()):"No subscription"})}),(0,a.jsxs)("button",{type:"button",className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:[(0,a.jsx)("span",{className:"sr-only",children:"View notifications"}),(0,a.jsx)(n.Z,{className:"h-5 w-5","aria-hidden":"true"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-primary-100 rounded-full flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-sm font-medium text-primary-700",children:null==x?void 0:null===(s=x.fullName)||void 0===s?void 0:s.split(" ").map(e=>e[0]).join("").slice(0,2)})}),(0,a.jsxs)("div",{className:"hidden md:block",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-900",children:null==x?void 0:x.fullName}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:null==x?void 0:x.email})]})]})]})]})})}},1601:function(e,s,t){"use strict";var a=t(2265);let l=a.forwardRef(function(e,s){let{title:t,titleId:l,...r}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":l},r),t?a.createElement("title",{id:l},t):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))});s.Z=l},9289:function(e,s,t){"use strict";var a=t(2265);let l=a.forwardRef(function(e,s){let{title:t,titleId:l,...r}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":l},r),t?a.createElement("title",{id:l},t):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 18.75a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m3 0h6m-9 0H3.375a1.125 1.125 0 0 1-1.125-1.125V14.25m17.25 4.5a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m3 0h1.125c.621 0 1.129-.504 1.09-1.124a17.902 17.902 0 0 0-3.213-9.193 2.056 2.056 0 0 0-1.58-.86H14.25M16.5 18.75h-2.25m0-11.177v-.958c0-.568-.422-1.048-.987-1.106a48.554 48.554 0 0 0-10.026 0 1.106 1.106 0 0 0-.987 1.106v7.635m12-6.677v6.677m0 4.5v-4.5m0 0h-12"}))});s.Z=l}},function(e){e.O(0,[64,762,24,480,971,117,744],function(){return e(e.s=9756)}),_N_E=e.O()}]);