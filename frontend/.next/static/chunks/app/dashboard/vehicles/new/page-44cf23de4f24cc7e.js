(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[869],{9111:function(e,s,a){Promise.resolve().then(a.bind(a,8251))},8251:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return g}});var r=a(7437),t=a(2265),l=a(9376),i=a(9501),n=a(3590),c=a(7119),d=a(2253),m=a(3836),o=a(1601),x=a(1591),u=a(3519),p=a(954),h=a(9064);let b=c.Ry({plateNumber:c.Z_().min(1,"Plate number is required"),type:c.Km(["bus","van","car","boat"],{errorMap:()=>({message:"Please select a vehicle type"})}),brand:c.Z_().min(1,"Brand is required"),model:c.Z_().min(1,"Model is required"),year:c.Rx().min(1900,"Invalid year").max(new Date().getFullYear()+1,"Invalid year"),capacity:c.Ry({passengers:c.Rx().min(1,"Passenger capacity must be at least 1"),luggage:c.Rx().optional()}),features:c.IX(c.Z_()).optional(),driver:c.Ry({name:c.Z_().optional(),phone:c.Z_().optional(),licenseNumber:c.Z_().optional()}).optional(),insurance:c.Ry({provider:c.Z_().min(1,"Insurance provider is required"),policyNumber:c.Z_().min(1,"Policy number is required"),expiryDate:c.Z_().min(1,"Expiry date is required")}),maintenance:c.Ry({lastService:c.Z_().optional(),nextService:c.Z_().min(1,"Next service date is required"),mileage:c.Rx().min(0,"Mileage cannot be negative")}).optional()});function g(){var e,s,a,c,g,v;let j=(0,l.useRouter)(),{createVehicle:y,isLoading:N}=(0,p.bW)(),[f,w]=(0,t.useState)(!1),[k,C]=(0,t.useState)(!1),{register:Z,handleSubmit:_,control:A,formState:{errors:E},setValue:L,watch:D}=(0,i.cI)({resolver:(0,n.F)(b),defaultValues:{type:"van",capacity:{passengers:1},features:[],insurance:{provider:"",policyNumber:"",expiryDate:""}}}),{fields:S,append:R,remove:B}=(0,i.Dq)({control:A,name:"features"}),I=async e=>{try{var s,a;let r={...e,features:(null===(s=e.features)||void 0===s?void 0:s.filter(Boolean))||[],driver:f&&(null===(a=e.driver)||void 0===a?void 0:a.name)?e.driver:void 0,maintenance:k?e.maintenance:void 0};await y(r),h.Am.success("Vehicle created successfully!"),j.push("/dashboard/vehicles")}catch(e){}};return(0,r.jsxs)("div",{className:"min-h-screen",children:[(0,r.jsx)(x.Z,{title:"Add New Vehicle",subtitle:"Add a new vehicle to your fleet"}),(0,r.jsx)("div",{className:"p-6",children:(0,r.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,r.jsxs)("div",{className:"flex items-center mb-6",children:[(0,r.jsxs)("button",{onClick:()=>j.back(),className:"btn-secondary flex items-center mr-4",children:[(0,r.jsx)(d.Z,{className:"h-4 w-4 mr-2"}),"Back"]}),(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Add New Vehicle"})]}),(0,r.jsxs)("form",{onSubmit:_(I),className:"space-y-8",children:[(0,r.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Basic Information"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"form-label",children:"Plate Number *"}),(0,r.jsx)("input",{type:"text",...Z("plateNumber"),className:"form-input",placeholder:"e.g., ABC-123"}),E.plateNumber&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-600",children:E.plateNumber.message})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"form-label",children:"Vehicle Type *"}),(0,r.jsxs)("select",{...Z("type"),className:"form-input",children:[(0,r.jsx)("option",{value:"van",children:"Van"}),(0,r.jsx)("option",{value:"bus",children:"Bus"}),(0,r.jsx)("option",{value:"car",children:"Car"}),(0,r.jsx)("option",{value:"boat",children:"Boat"})]}),E.type&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-600",children:E.type.message})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"form-label",children:"Brand *"}),(0,r.jsx)("input",{type:"text",...Z("brand"),className:"form-input",placeholder:"e.g., Toyota"}),E.brand&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-600",children:E.brand.message})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"form-label",children:"Model *"}),(0,r.jsx)("input",{type:"text",...Z("model"),className:"form-input",placeholder:"e.g., Hiace"}),E.model&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-600",children:E.model.message})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"form-label",children:"Year *"}),(0,r.jsx)("input",{type:"number",...Z("year",{valueAsNumber:!0}),className:"form-input",placeholder:"2023",min:"1900",max:new Date().getFullYear()+1}),E.year&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-600",children:E.year.message})]})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Capacity"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"form-label",children:"Passenger Capacity *"}),(0,r.jsx)("input",{type:"number",...Z("capacity.passengers",{valueAsNumber:!0}),className:"form-input",placeholder:"8",min:"1"}),(null===(e=E.capacity)||void 0===e?void 0:e.passengers)&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-600",children:E.capacity.passengers.message})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"form-label",children:"Luggage Capacity (optional)"}),(0,r.jsx)("input",{type:"number",...Z("capacity.luggage",{valueAsNumber:!0}),className:"form-input",placeholder:"10 bags",min:"0"})]})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Features"}),(0,r.jsxs)("button",{type:"button",onClick:()=>R(""),className:"btn-secondary flex items-center text-sm",children:[(0,r.jsx)(m.Z,{className:"h-4 w-4 mr-1"}),"Add Feature"]})]}),S.length>0?(0,r.jsx)("div",{className:"space-y-3",children:S.map((e,s)=>(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("input",{type:"text",...Z("features.".concat(s)),className:"form-input flex-1",placeholder:"e.g., Air Conditioning, WiFi, GPS"}),(0,r.jsx)("button",{type:"button",onClick:()=>B(s),className:"p-2 text-red-600 hover:text-red-800",children:(0,r.jsx)(o.Z,{className:"h-4 w-4"})})]},e.id))}):(0,r.jsx)("p",{className:"text-gray-500 text-sm",children:'No features added yet. Click "Add Feature" to get started.'})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Driver Information"}),(0,r.jsxs)("label",{className:"flex items-center",children:[(0,r.jsx)("input",{type:"checkbox",checked:f,onChange:e=>w(e.target.checked),className:"rounded border-gray-300 text-primary-600 shadow-sm focus:border-primary-300 focus:ring focus:ring-primary-200 focus:ring-opacity-50"}),(0,r.jsx)("span",{className:"ml-2 text-sm text-gray-700",children:"Assign driver"})]})]}),f&&(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"form-label",children:"Driver Name"}),(0,r.jsx)("input",{type:"text",...Z("driver.name"),className:"form-input",placeholder:"John Doe"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"form-label",children:"Phone Number"}),(0,r.jsx)("input",{type:"tel",...Z("driver.phone"),className:"form-input",placeholder:"+1234567890"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"form-label",children:"License Number"}),(0,r.jsx)("input",{type:"text",...Z("driver.licenseNumber"),className:"form-input",placeholder:"DL123456"})]})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Insurance Information"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"form-label",children:"Insurance Provider *"}),(0,r.jsx)("input",{type:"text",...Z("insurance.provider"),className:"form-input",placeholder:"ABC Insurance"}),(null===(s=E.insurance)||void 0===s?void 0:s.provider)&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-600",children:E.insurance.provider.message})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"form-label",children:"Policy Number *"}),(0,r.jsx)("input",{type:"text",...Z("insurance.policyNumber"),className:"form-input",placeholder:"POL123456"}),(null===(a=E.insurance)||void 0===a?void 0:a.policyNumber)&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-600",children:E.insurance.policyNumber.message})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"form-label",children:"Expiry Date *"}),(0,r.jsx)("input",{type:"date",...Z("insurance.expiryDate"),className:"form-input"}),(null===(c=E.insurance)||void 0===c?void 0:c.expiryDate)&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-600",children:E.insurance.expiryDate.message})]})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Maintenance Information"}),(0,r.jsxs)("label",{className:"flex items-center",children:[(0,r.jsx)("input",{type:"checkbox",checked:k,onChange:e=>C(e.target.checked),className:"rounded border-gray-300 text-primary-600 shadow-sm focus:border-primary-300 focus:ring focus:ring-primary-200 focus:ring-opacity-50"}),(0,r.jsx)("span",{className:"ml-2 text-sm text-gray-700",children:"Add maintenance data"})]})]}),k&&(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"form-label",children:"Last Service Date"}),(0,r.jsx)("input",{type:"date",...Z("maintenance.lastService"),className:"form-input"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"form-label",children:"Next Service Date *"}),(0,r.jsx)("input",{type:"date",...Z("maintenance.nextService"),className:"form-input"}),(null===(g=E.maintenance)||void 0===g?void 0:g.nextService)&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-600",children:E.maintenance.nextService.message})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"form-label",children:"Current Mileage"}),(0,r.jsx)("input",{type:"number",...Z("maintenance.mileage",{valueAsNumber:!0}),className:"form-input",placeholder:"50000",min:"0"}),(null===(v=E.maintenance)||void 0===v?void 0:v.mileage)&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-600",children:E.maintenance.mileage.message})]})]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-end space-x-4 pt-6",children:[(0,r.jsx)("button",{type:"button",onClick:()=>j.back(),className:"btn-secondary",children:"Cancel"}),(0,r.jsxs)("button",{type:"submit",disabled:N,className:"btn-primary",children:[N?(0,r.jsx)(u.Z,{size:"sm",className:"mr-2"}):null,N?"Creating...":"Create Vehicle"]})]})]})]})})]})}},1591:function(e,s,a){"use strict";a.d(s,{Z:function(){return d}});var r=a(7437),t=a(2265),l=a(1556),i=a(3121),n=a(954),c=a(4508);function d(e){var s;let{title:a,subtitle:d}=e,[m,o]=(0,t.useState)(""),{user:x}=(0,n.tN)(),{subscription:u}=(0,n.ZO)();return(0,r.jsx)("div",{className:"bg-white border-b border-gray-200 px-6 py-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[a&&(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:a}),d&&(0,r.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:d})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsxs)("div",{className:"relative hidden md:block",children:[(0,r.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,r.jsx)(l.Z,{className:"h-4 w-4 text-gray-400"})}),(0,r.jsx)("input",{type:"text",placeholder:"Search...",value:m,onChange:e=>o(e.target.value),className:"block pl-9 pr-3 py-2 border border-gray-300 rounded-md text-sm placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 w-64"})]}),(0,r.jsx)("div",{className:"hidden sm:block",children:(0,r.jsx)("span",{className:(0,c.cn)("inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",(()=>{if(!u)return"bg-gray-100 text-gray-800";switch(u.status){case"active":return"bg-green-100 text-green-800";case"pending_payment":return"bg-yellow-100 text-yellow-800";case"pending_approval":return"bg-blue-100 text-blue-800";case"expired":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}})()),children:u?u.status.replace("_"," ").replace(/\b\w/g,e=>e.toUpperCase()):"No subscription"})}),(0,r.jsxs)("button",{type:"button",className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:[(0,r.jsx)("span",{className:"sr-only",children:"View notifications"}),(0,r.jsx)(i.Z,{className:"h-5 w-5","aria-hidden":"true"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("div",{className:"w-8 h-8 bg-primary-100 rounded-full flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-sm font-medium text-primary-700",children:null==x?void 0:null===(s=x.fullName)||void 0===s?void 0:s.split(" ").map(e=>e[0]).join("").slice(0,2)})}),(0,r.jsxs)("div",{className:"hidden md:block",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-900",children:null==x?void 0:x.fullName}),(0,r.jsx)("p",{className:"text-xs text-gray-500",children:null==x?void 0:x.email})]})]})]})]})})}},3121:function(e,s,a){"use strict";var r=a(2265);let t=r.forwardRef(function(e,s){let{title:a,titleId:t,...l}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},l),a?r.createElement("title",{id:t},a):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.857 17.082a23.848 23.848 0 0 0 5.454-1.31A8.967 8.967 0 0 1 18 9.75V9A6 6 0 0 0 6 9v.75a8.967 8.967 0 0 1-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 0 1-5.714 0m5.714 0a3 3 0 1 1-5.714 0"}))});s.Z=t},1556:function(e,s,a){"use strict";var r=a(2265);let t=r.forwardRef(function(e,s){let{title:a,titleId:t,...l}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},l),a?r.createElement("title",{id:t},a):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"}))});s.Z=t},3836:function(e,s,a){"use strict";var r=a(2265);let t=r.forwardRef(function(e,s){let{title:a,titleId:t,...l}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},l),a?r.createElement("title",{id:t},a):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))});s.Z=t},1601:function(e,s,a){"use strict";var r=a(2265);let t=r.forwardRef(function(e,s){let{title:a,titleId:t,...l}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},l),a?r.createElement("title",{id:t},a):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))});s.Z=t}},function(e){e.O(0,[64,762,214,480,971,117,744],function(){return e(e.s=9111)}),_N_E=e.O()}]);