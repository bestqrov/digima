(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[633],{2689:function(e,t,s){Promise.resolve().then(s.bind(s,327))},327:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return b}});var r=s(7437),a=s(2265);let n=a.forwardRef(function(e,t){let{title:s,titleId:r,...n}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},n),s?a.createElement("title",{id:r},s):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 12.75 6 6 9-13.5"}))}),l=a.forwardRef(function(e,t){let{title:s,titleId:r,...n}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},n),s?a.createElement("title",{id:r},s):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m2.25 0H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))}),i=a.forwardRef(function(e,t){let{title:s,titleId:r,...n}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},n),s?a.createElement("title",{id:r},s):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"}))});var c=s(1442),o=s(8081),d=s(322),m=s(1591),x=s(3519),u=s(954),h=s(4508),p=s(9064);let g=e=>{let{plan:t,isCurrentPlan:s,onSelect:a,isLoading:l}=e;return(0,r.jsxs)("div",{className:"rounded-lg border-2 p-6 ".concat(s?"border-primary-500 bg-primary-50":"border-gray-200 bg-white hover:border-gray-300"," transition-colors"),children:[(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-900",children:t.name}),(0,r.jsxs)("p",{className:"mt-2 text-3xl font-bold text-gray-900",children:[(0,h.xG)(t.monthlyPrice),(0,r.jsx)("span",{className:"text-base font-normal text-gray-500",children:"/month"})]})]}),(0,r.jsxs)("ul",{className:"mt-6 space-y-3",children:[(0,r.jsxs)("li",{className:"flex items-center",children:[(0,r.jsx)(n,{className:"h-4 w-4 text-green-500 mr-3"}),(0,r.jsxs)("span",{className:"text-sm",children:[t.features.maxUsers," users"]})]}),(0,r.jsxs)("li",{className:"flex items-center",children:[(0,r.jsx)(n,{className:"h-4 w-4 text-green-500 mr-3"}),(0,r.jsxs)("span",{className:"text-sm",children:[t.features.maxVehicles," vehicles"]})]}),(0,r.jsxs)("li",{className:"flex items-center",children:[(0,r.jsx)(n,{className:"h-4 w-4 text-green-500 mr-3"}),(0,r.jsxs)("span",{className:"text-sm",children:[t.features.maxTripsPerMonth," trips/month"]})]}),t.features.hasReporting&&(0,r.jsxs)("li",{className:"flex items-center",children:[(0,r.jsx)(n,{className:"h-4 w-4 text-green-500 mr-3"}),(0,r.jsx)("span",{className:"text-sm",children:"Advanced reporting"})]}),t.features.hasApi&&(0,r.jsxs)("li",{className:"flex items-center",children:[(0,r.jsx)(n,{className:"h-4 w-4 text-green-500 mr-3"}),(0,r.jsx)("span",{className:"text-sm",children:"API access"})]}),(0,r.jsxs)("li",{className:"flex items-center",children:[(0,r.jsx)(n,{className:"h-4 w-4 text-green-500 mr-3"}),(0,r.jsxs)("span",{className:"text-sm capitalize",children:[t.features.priority," priority support"]})]})]}),(0,r.jsxs)("button",{onClick:()=>a(t._id),disabled:s||l,className:"mt-6 w-full py-2 px-4 rounded-md text-sm font-medium transition-colors ".concat(s?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-primary-600 text-white hover:bg-primary-700 disabled:opacity-50"),children:[l?(0,r.jsx)(x.Z,{size:"sm"}):null,s?"Current Plan":"Select Plan"]})]})},f=e=>{let{subscription:t,onUpload:s}=e,[n,i]=(0,a.useState)(null),[c,o]=(0,a.useState)(!1),d=async()=>{if(n)try{o(!0),await s(t._id,n),i(null);let e=document.getElementById("payment-proof");e&&(e.value="")}catch(e){}finally{o(!1)}};return(0,r.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Upload Payment Proof"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"payment-proof",className:"block text-sm font-medium text-gray-700 mb-2",children:"Select payment proof (Image or PDF, max 5MB)"}),(0,r.jsx)("input",{type:"file",id:"payment-proof",accept:"image/*,.pdf",onChange:e=>{var t;let s=null===(t=e.target.files)||void 0===t?void 0:t[0];if(s){if(!s.type.startsWith("image/")&&"application/pdf"!==s.type){p.Am.error("Please upload an image or PDF file");return}if(s.size>5242880){p.Am.error("File size must be less than 5MB");return}i(s)}},className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-medium file:bg-primary-50 file:text-primary-700 hover:file:bg-primary-100"})]}),n&&(0,r.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-md",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(l,{className:"h-5 w-5 text-gray-400 mr-2"}),(0,r.jsx)("span",{className:"text-sm text-gray-700",children:n.name})]}),(0,r.jsx)("button",{onClick:()=>i(null),className:"text-sm text-red-600 hover:text-red-800",children:"Remove"})]}),(0,r.jsxs)("button",{onClick:d,disabled:!n||c,className:"btn-primary disabled:opacity-50",children:[c?(0,r.jsx)(x.Z,{size:"sm",className:"mr-2"}):null,c?"Uploading...":"Upload Payment Proof"]})]})]})};function b(){let{subscription:e,plans:t,usage:s,isLoading:n,fetchCurrentSubscription:l,fetchPlans:p,fetchUsage:b,requestSubscription:j,uploadPaymentProof:y,renewSubscription:v}=(0,u.ZO)();(0,a.useEffect)(()=>{l(),p(),b()},[l,p,b]);let N=async t=>{try{e&&"expired"===e.status?await v(e._id,t):await j(t)}catch(e){}},w=async(e,t)=>{await y(e,t)};return n&&!e&&0===t.length?(0,r.jsxs)("div",{className:"min-h-screen",children:[(0,r.jsx)(m.Z,{title:"Subscription",subtitle:"Manage your ArwaPark subscription"}),(0,r.jsx)("div",{className:"p-6",children:(0,r.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,r.jsx)(x.Z,{size:"lg"})})})]}):(0,r.jsxs)("div",{className:"min-h-screen",children:[(0,r.jsx)(m.Z,{title:"Subscription",subtitle:"Manage your ArwaPark subscription and billing"}),(0,r.jsxs)("div",{className:"p-6 max-w-7xl mx-auto",children:[(0,r.jsx)("div",{className:"bg-white rounded-lg border border-gray-200 p-8 mb-8",children:(()=>{if(!e)return(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)(i,{className:"mx-auto h-12 w-12 text-yellow-500 mb-4"}),(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Active Subscription"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Choose a plan below to get started with ArwaPark."})]});let{status:t}=e;switch(t){case"active":return(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)(c.Z,{className:"mx-auto h-12 w-12 text-green-500 mb-4"}),(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Subscription Active"}),(0,r.jsxs)("p",{className:"text-gray-600",children:["Your subscription is active until ",(0,h.p6)(e.endDate||"")]})]});case"pending_payment":return(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)(o.Z,{className:"mx-auto h-12 w-12 text-yellow-500 mb-4"}),(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Payment Required"}),(0,r.jsx)("p",{className:"text-gray-600 mb-6",children:"Please complete your payment to activate your subscription."}),e.bankTransferInfo&&(0,r.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 text-left",children:[(0,r.jsx)("h4",{className:"font-medium text-blue-900 mb-2",children:"Bank Transfer Details:"}),(0,r.jsxs)("div",{className:"text-sm text-blue-800 space-y-1",children:[(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Bank:"})," ",e.bankTransferInfo.bankName]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Account Number:"})," ",e.bankTransferInfo.accountNumber]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Account Name:"})," ",e.bankTransferInfo.accountName]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Amount:"})," ",(0,h.xG)(e.bankTransferInfo.amount)]})]})]})]});case"pending_approval":return(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)(d.Z,{className:"mx-auto h-12 w-12 text-blue-500 mb-4"}),(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Payment Under Review"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Your payment proof has been submitted and is being reviewed. You'll be notified once approved."}),e.paymentProof&&(0,r.jsxs)("p",{className:"text-sm text-gray-500 mt-2",children:["Uploaded: ",(0,h.p6)(e.paymentProof.uploadDate)]})]});case"expired":return(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)(i,{className:"mx-auto h-12 w-12 text-red-500 mb-4"}),(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Subscription Expired"}),(0,r.jsxs)("p",{className:"text-gray-600",children:["Your subscription expired on ",(0,h.p6)(e.endDate||""),". Renew to continue."]})]});default:return null}})()}),s&&(null==e?void 0:e.status)==="active"&&(0,r.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6 mb-8",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Current Usage"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:[s.currentUsers," / ",e.planId.features.maxUsers]}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Users"})]}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:[s.currentVehicles," / ",e.planId.features.maxVehicles]}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Vehicles"})]}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:[s.currentMonthTrips," / ",e.planId.features.maxTripsPerMonth]}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Trips This Month"})]})]})]}),(null==e?void 0:e.status)==="pending_payment"&&(0,r.jsx)("div",{className:"mb-8",children:(0,r.jsx)(f,{subscription:e,onUpload:w})}),(0,r.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[(0,r.jsxs)("div",{className:"text-center mb-8",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Choose Your Plan"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Select the plan that best fits your transport business needs"})]}),t.length>0?(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(t=>{var s;return(0,r.jsx)(g,{plan:t,isCurrentPlan:(null==e?void 0:null===(s=e.planId)||void 0===s?void 0:s._id)===t._id,onSelect:N,isLoading:n},t._id)})}):(0,r.jsx)("div",{className:"text-center py-8",children:(0,r.jsx)("p",{className:"text-gray-500",children:"No plans available at the moment."})})]})]})]})}},1591:function(e,t,s){"use strict";s.d(t,{Z:function(){return o}});var r=s(7437),a=s(2265),n=s(1556),l=s(3121),i=s(954),c=s(4508);function o(e){var t;let{title:s,subtitle:o}=e,[d,m]=(0,a.useState)(""),{user:x}=(0,i.tN)(),{subscription:u}=(0,i.ZO)();return(0,r.jsx)("div",{className:"bg-white border-b border-gray-200 px-6 py-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[s&&(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:s}),o&&(0,r.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:o})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsxs)("div",{className:"relative hidden md:block",children:[(0,r.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,r.jsx)(n.Z,{className:"h-4 w-4 text-gray-400"})}),(0,r.jsx)("input",{type:"text",placeholder:"Search...",value:d,onChange:e=>m(e.target.value),className:"block pl-9 pr-3 py-2 border border-gray-300 rounded-md text-sm placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 w-64"})]}),(0,r.jsx)("div",{className:"hidden sm:block",children:(0,r.jsx)("span",{className:(0,c.cn)("inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",(()=>{if(!u)return"bg-gray-100 text-gray-800";switch(u.status){case"active":return"bg-green-100 text-green-800";case"pending_payment":return"bg-yellow-100 text-yellow-800";case"pending_approval":return"bg-blue-100 text-blue-800";case"expired":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}})()),children:u?u.status.replace("_"," ").replace(/\b\w/g,e=>e.toUpperCase()):"No subscription"})}),(0,r.jsxs)("button",{type:"button",className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:[(0,r.jsx)("span",{className:"sr-only",children:"View notifications"}),(0,r.jsx)(l.Z,{className:"h-5 w-5","aria-hidden":"true"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("div",{className:"w-8 h-8 bg-primary-100 rounded-full flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-sm font-medium text-primary-700",children:null==x?void 0:null===(t=x.fullName)||void 0===t?void 0:t.split(" ").map(e=>e[0]).join("").slice(0,2)})}),(0,r.jsxs)("div",{className:"hidden md:block",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-900",children:null==x?void 0:x.fullName}),(0,r.jsx)("p",{className:"text-xs text-gray-500",children:null==x?void 0:x.email})]})]})]})]})})}},3121:function(e,t,s){"use strict";var r=s(2265);let a=r.forwardRef(function(e,t){let{title:s,titleId:a,...n}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},n),s?r.createElement("title",{id:a},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.857 17.082a23.848 23.848 0 0 0 5.454-1.31A8.967 8.967 0 0 1 18 9.75V9A6 6 0 0 0 6 9v.75a8.967 8.967 0 0 1-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 0 1-5.714 0m5.714 0a3 3 0 1 1-5.714 0"}))});t.Z=a},1442:function(e,t,s){"use strict";var r=s(2265);let a=r.forwardRef(function(e,t){let{title:s,titleId:a,...n}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},n),s?r.createElement("title",{id:a},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))});t.Z=a},322:function(e,t,s){"use strict";var r=s(2265);let a=r.forwardRef(function(e,t){let{title:s,titleId:a,...n}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},n),s?r.createElement("title",{id:a},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))});t.Z=a},8081:function(e,t,s){"use strict";var r=s(2265);let a=r.forwardRef(function(e,t){let{title:s,titleId:a,...n}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},n),s?r.createElement("title",{id:a},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 8.25h19.5M2.25 9h19.5m-16.5 5.25h6m-6 2.25h3m-3.75 3h15a2.25 2.25 0 0 0 2.25-2.25V6.75A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25v10.5A2.25 2.25 0 0 0 4.5 19.5Z"}))});t.Z=a},1556:function(e,t,s){"use strict";var r=s(2265);let a=r.forwardRef(function(e,t){let{title:s,titleId:a,...n}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},n),s?r.createElement("title",{id:a},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"}))});t.Z=a}},function(e){e.O(0,[64,762,480,971,117,744],function(){return e(e.s=2689)}),_N_E=e.O()}]);