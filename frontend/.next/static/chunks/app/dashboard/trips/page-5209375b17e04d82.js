(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[953],{7590:function(e,t,s){Promise.resolve().then(s.bind(s,1080))},1080:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return C}});var a=s(7437),r=s(2265),n=s(9376),l=s(322),i=s(1442);let c=r.forwardRef(function(e,t){let{title:s,titleId:a,...n}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},n),s?r.createElement("title",{id:a},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))});var d=s(3730),o=s(2548),m=s(2594),x=s(6546),u=s(1556),h=s(4565),p=s(3836),g=s(2553),f=s(1591),b=s(3519),j=s(8184),y=s(954),v=s(4508);let N=[{value:"",label:"All Statuses"},{value:"pending",label:"Pending"},{value:"confirmed",label:"Confirmed"},{value:"in_progress",label:"In Progress"},{value:"completed",label:"Completed"},{value:"cancelled",label:"Cancelled"}],w=[{value:"",label:"All Payment Status"},{value:"pending",label:"Payment Pending"},{value:"paid",label:"Paid"},{value:"refunded",label:"Refunded"}],k=e=>{let{trip:t,onEdit:s,onView:r,onStatusChange:n,onPaymentStatusChange:u}=e;return(0,a.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6 card-hover",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(e=>{switch(e){case"pending":return(0,a.jsx)(l.Z,{className:"w-5 h-5 text-yellow-500"});case"confirmed":case"in_progress":return(0,a.jsx)(i.Z,{className:"w-5 h-5 text-blue-500"});case"completed":return(0,a.jsx)(i.Z,{className:"w-5 h-5 text-green-500"});case"cancelled":return(0,a.jsx)(c,{className:"w-5 h-5 text-red-500"});default:return(0,a.jsx)(d.Z,{className:"w-5 h-5 text-gray-500"})}})(t.status),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:t.customerInfo.name}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:[t.customerInfo.numberOfPassengers," passengers"]})]})]}),(0,a.jsxs)(g.v,{as:"div",className:"relative",children:[(0,a.jsx)(g.v.Button,{className:"p-2 text-gray-400 hover:text-gray-600 rounded-lg hover:bg-gray-50",children:(0,a.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,a.jsx)("path",{d:"M10 6a2 2 0 110-4 2 2 0 010 4zM10 12a2 2 0 110-4 2 2 0 010 4zM10 18a2 2 0 110-4 2 2 0 010 4z"})})}),(0,a.jsxs)(g.v.Items,{className:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none z-10",children:[(0,a.jsx)(g.v.Item,{children:e=>{let{active:s}=e;return(0,a.jsxs)("button",{onClick:()=>r(t),className:(0,v.cn)(s?"bg-gray-50":"","flex w-full items-center px-4 py-2 text-sm text-gray-700"),children:[(0,a.jsx)(o.Z,{className:"mr-3 h-4 w-4"}),"View Details"]})}}),(0,a.jsx)(g.v.Item,{children:e=>{let{active:r}=e;return(0,a.jsxs)("button",{onClick:()=>s(t),className:(0,v.cn)(r?"bg-gray-50":"","flex w-full items-center px-4 py-2 text-sm text-gray-700"),children:[(0,a.jsx)(m.Z,{className:"mr-3 h-4 w-4"}),"Edit Trip"]})}}),"pending"===t.status&&(0,a.jsx)(g.v.Item,{children:e=>{let{active:s}=e;return(0,a.jsxs)("button",{onClick:()=>n(t,"confirmed"),className:(0,v.cn)(s?"bg-gray-50":"","flex w-full items-center px-4 py-2 text-sm text-green-600"),children:[(0,a.jsx)(i.Z,{className:"mr-3 h-4 w-4"}),"Confirm Trip"]})}}),"confirmed"===t.status&&(0,a.jsx)(g.v.Item,{children:e=>{let{active:s}=e;return(0,a.jsx)("button",{onClick:()=>n(t,"in_progress"),className:(0,v.cn)(s?"bg-gray-50":"","flex w-full items-center px-4 py-2 text-sm text-blue-600"),children:"Start Trip"})}}),"in_progress"===t.status&&(0,a.jsx)(g.v.Item,{children:e=>{let{active:s}=e;return(0,a.jsx)("button",{onClick:()=>n(t,"completed"),className:(0,v.cn)(s?"bg-gray-50":"","flex w-full items-center px-4 py-2 text-sm text-green-600"),children:"Complete Trip"})}}),"pending"===t.paymentStatus&&(0,a.jsx)(g.v.Item,{children:e=>{let{active:s}=e;return(0,a.jsxs)("button",{onClick:()=>u(t,"paid"),className:(0,v.cn)(s?"bg-gray-50":"","flex w-full items-center px-4 py-2 text-sm text-green-600"),children:[(0,a.jsx)(x.Z,{className:"mr-3 h-4 w-4"}),"Mark Paid"]})}}),["pending","confirmed"].includes(t.status)&&(0,a.jsx)(g.v.Item,{children:e=>{let{active:s}=e;return(0,a.jsxs)("button",{onClick:()=>n(t,"cancelled"),className:(0,v.cn)(s?"bg-gray-50":"","flex w-full items-center px-4 py-2 text-sm text-red-600"),children:[(0,a.jsx)(c,{className:"mr-3 h-4 w-4"}),"Cancel Trip"]})}})]})]})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"text-sm",children:[(0,a.jsx)("p",{className:"font-medium text-gray-900",children:"Route:"}),(0,a.jsx)("p",{className:"text-gray-600",children:t.itinerary.pickupLocation.address}),(0,a.jsx)("p",{className:"text-gray-400 text-xs",children:"â†“"}),(0,a.jsx)("p",{className:"text-gray-600",children:t.itinerary.dropoffLocation.address})]}),(0,a.jsx)("div",{className:"flex items-center justify-between text-sm",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-500",children:"Pickup:"}),(0,a.jsx)("span",{className:"ml-2 font-medium text-gray-900",children:new Date(t.itinerary.pickupTime).toLocaleString()})]})}),t.vehicleId&&(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-gray-500",children:"Vehicle:"}),(0,a.jsx)("span",{className:"font-medium text-gray-900",children:"object"==typeof t.vehicleId?t.vehicleId.plateNumber:"Unknown"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:(0,v.cn)("inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",(0,v.z2)(t.status)),children:t.status.charAt(0).toUpperCase()+t.status.slice(1).replace("_"," ")}),(0,a.jsx)("span",{className:(0,v.cn)("inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",(0,v.z2)(t.paymentStatus)),children:t.paymentStatus.charAt(0).toUpperCase()+t.paymentStatus.slice(1)})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between pt-3 border-t border-gray-200",children:[(0,a.jsx)("span",{className:"text-lg font-bold text-gray-900",children:(0,v.xG)(t.pricing.totalAmount)}),(0,a.jsx)("span",{className:"text-xs text-gray-500",children:(0,v.p6)(t.createdAt)})]})]})]})};function C(){var e;let t=(0,n.useRouter)(),[s,l]=(0,r.useState)(""),[i,c]=(0,r.useState)(!1),{trips:o,pagination:m,filters:x,isLoading:g,fetchTrips:C,setFilters:Z,setPagination:S,updateTripStatus:E,updatePaymentStatus:_}=(0,y.BD)(),{user:L}=(0,y.tN)();(0,r.useEffect)(()=>{C()},[C]);let I=e=>{l(e),Z({...x,search:e})},M=(e,t)=>{Z({...x,[e]:t||void 0})},P=async(e,t)=>{try{await E(e._id,t)}catch(e){}},R=async(e,t)=>{try{await _(e._id,t)}catch(e){}},O=e=>{t.push("/dashboard/trips/".concat(e._id,"/edit"))},T=e=>{t.push("/dashboard/trips/".concat(e._id))},B=e=>{S(e)};return g&&0===o.length?(0,a.jsxs)("div",{className:"min-h-screen",children:[(0,a.jsx)(f.Z,{title:"Trips",subtitle:"Manage your transportation bookings"}),(0,a.jsx)("div",{className:"p-6",children:(0,a.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,a.jsx)(b.Z,{size:"lg"})})})]}):(0,a.jsxs)("div",{className:"min-h-screen",children:[(0,a.jsx)(f.Z,{title:"Trips",subtitle:"Manage your transportation bookings and schedules"}),(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(u.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,a.jsx)("input",{type:"text",placeholder:"Search trips...",value:s,onChange:e=>I(e.target.value),className:"pl-9 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 w-64"})]}),(0,a.jsxs)("button",{onClick:()=>c(!i),className:"btn-secondary flex items-center",children:[(0,a.jsx)(h.Z,{className:"h-4 w-4 mr-2"}),"Filters"]})]}),(0,a.jsxs)("button",{onClick:()=>t.push("/dashboard/trips/new"),className:"btn-primary flex items-center",children:[(0,a.jsx)(p.Z,{className:"h-4 w-4 mr-2"}),"New Trip"]})]}),i&&(0,a.jsx)("div",{className:"bg-white rounded-lg border border-gray-200 p-4 mb-6",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),(0,a.jsx)("select",{value:x.status||"",onChange:e=>M("status",e.target.value),className:"form-input",children:N.map(e=>(0,a.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Payment Status"}),(0,a.jsx)("select",{value:x.paymentStatus||"",onChange:e=>M("paymentStatus",e.target.value),className:"form-input",children:w.map(e=>(0,a.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date Range"}),(0,a.jsx)("input",{type:"date",value:(null===(e=x.dateRange)||void 0===e?void 0:e.start)||"",onChange:e=>{var t;return M("dateRange",e.target.value?JSON.stringify({start:e.target.value,end:(null===(t=x.dateRange)||void 0===t?void 0:t.end)||""}):"")},className:"form-input",placeholder:"Start date"})]}),(0,a.jsx)("div",{className:"flex items-end",children:(0,a.jsx)("button",{onClick:()=>Z({}),className:"btn-secondary",children:"Clear Filters"})})]})}),o.length>0?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-6",children:o.map(e=>(0,a.jsx)(k,{trip:e,onEdit:O,onView:T,onStatusChange:P,onPaymentStatusChange:R},e._id))}),m.pages>1&&(0,a.jsxs)("div",{className:"flex items-center justify-between border-t border-gray-200 bg-white px-4 py-3 sm:px-6",children:[(0,a.jsxs)("div",{className:"flex flex-1 justify-between sm:hidden",children:[(0,a.jsx)("button",{onClick:()=>B(m.page-1),disabled:1===m.page,className:"relative inline-flex items-center rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50",children:"Previous"}),(0,a.jsx)("button",{onClick:()=>B(m.page+1),disabled:m.page===m.pages,className:"relative ml-3 inline-flex items-center rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50",children:"Next"})]}),(0,a.jsxs)("div",{className:"hidden sm:flex sm:flex-1 sm:items-center sm:justify-between",children:[(0,a.jsx)("div",{children:(0,a.jsxs)("p",{className:"text-sm text-gray-700",children:["Showing"," ",(0,a.jsx)("span",{className:"font-medium",children:(m.page-1)*m.limit+1})," ","to"," ",(0,a.jsx)("span",{className:"font-medium",children:Math.min(m.page*m.limit,m.total)})," ","of ",(0,a.jsx)("span",{className:"font-medium",children:m.total})," trips"]})}),(0,a.jsx)("div",{className:"flex space-x-2",children:Array.from({length:m.pages},(e,t)=>t+1).map(e=>(0,a.jsx)("button",{onClick:()=>B(e),className:(0,v.cn)("relative inline-flex items-center px-4 py-2 text-sm font-medium rounded-md",e===m.page?"bg-primary-600 text-white":"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50"),children:e},e))})]})]})]}):(0,a.jsx)(j.Z,{title:"No trips found",description:"Start by creating your first trip booking.",actionLabel:"New Trip",onAction:()=>t.push("/dashboard/trips/new"),icon:d.Z})]})]})}},8184:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});var a=s(7437),r=s(3145),n=s(3836);function l(e){let{title:t,description:s,actionLabel:l,onAction:i,icon:c,imageSrc:d}=e;return(0,a.jsx)("div",{className:"text-center py-12",children:(0,a.jsxs)("div",{className:"mx-auto max-w-md",children:[d?(0,a.jsx)(r.default,{src:d,alt:"Empty state",width:200,height:200,className:"mx-auto mb-6"}):c?(0,a.jsx)(c,{className:"mx-auto h-12 w-12 text-gray-400 mb-6"}):(0,a.jsx)("div",{className:"mx-auto h-12 w-12 bg-gray-100 rounded-lg flex items-center justify-center mb-6",children:(0,a.jsx)("span",{className:"text-2xl text-gray-400",children:"\uD83D\uDCCB"})}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:t}),(0,a.jsx)("p",{className:"text-gray-500 mb-6",children:s}),l&&i&&(0,a.jsxs)("button",{type:"button",onClick:i,className:"btn-primary inline-flex items-center",children:[(0,a.jsx)(n.Z,{className:"h-4 w-4 mr-2","aria-hidden":"true"}),l]})]})})}},1591:function(e,t,s){"use strict";s.d(t,{Z:function(){return d}});var a=s(7437),r=s(2265),n=s(1556),l=s(3121),i=s(954),c=s(4508);function d(e){var t;let{title:s,subtitle:d}=e,[o,m]=(0,r.useState)(""),{user:x}=(0,i.tN)(),{subscription:u}=(0,i.ZO)();return(0,a.jsx)("div",{className:"bg-white border-b border-gray-200 px-6 py-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[s&&(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:s}),d&&(0,a.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:d})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("div",{className:"relative hidden md:block",children:[(0,a.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,a.jsx)(n.Z,{className:"h-4 w-4 text-gray-400"})}),(0,a.jsx)("input",{type:"text",placeholder:"Search...",value:o,onChange:e=>m(e.target.value),className:"block pl-9 pr-3 py-2 border border-gray-300 rounded-md text-sm placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 w-64"})]}),(0,a.jsx)("div",{className:"hidden sm:block",children:(0,a.jsx)("span",{className:(0,c.cn)("inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",(()=>{if(!u)return"bg-gray-100 text-gray-800";switch(u.status){case"active":return"bg-green-100 text-green-800";case"pending_payment":return"bg-yellow-100 text-yellow-800";case"pending_approval":return"bg-blue-100 text-blue-800";case"expired":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}})()),children:u?u.status.replace("_"," ").replace(/\b\w/g,e=>e.toUpperCase()):"No subscription"})}),(0,a.jsxs)("button",{type:"button",className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:[(0,a.jsx)("span",{className:"sr-only",children:"View notifications"}),(0,a.jsx)(l.Z,{className:"h-5 w-5","aria-hidden":"true"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-primary-100 rounded-full flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-sm font-medium text-primary-700",children:null==x?void 0:null===(t=x.fullName)||void 0===t?void 0:t.split(" ").map(e=>e[0]).join("").slice(0,2)})}),(0,a.jsxs)("div",{className:"hidden md:block",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-900",children:null==x?void 0:x.fullName}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:null==x?void 0:x.email})]})]})]})]})})}},1442:function(e,t,s){"use strict";var a=s(2265);let r=a.forwardRef(function(e,t){let{title:s,titleId:r,...n}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},n),s?a.createElement("title",{id:r},s):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))});t.Z=r},322:function(e,t,s){"use strict";var a=s(2265);let r=a.forwardRef(function(e,t){let{title:s,titleId:r,...n}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},n),s?a.createElement("title",{id:r},s):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))});t.Z=r},6546:function(e,t,s){"use strict";var a=s(2265);let r=a.forwardRef(function(e,t){let{title:s,titleId:r,...n}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},n),s?a.createElement("title",{id:r},s):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v12m-3-2.818.879.659c1.171.879 3.07.879 4.242 0 1.172-.879 1.172-2.303 0-3.182C13.536 12.219 12.768 12 12 12c-.725 0-1.45-.22-2.003-.659-1.106-.879-1.106-2.303 0-3.182s2.9-.879 4.006 0l.415.33M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))});t.Z=r},3730:function(e,t,s){"use strict";var a=s(2265);let r=a.forwardRef(function(e,t){let{title:s,titleId:r,...n}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},n),s?a.createElement("title",{id:r},s):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 6.75V15m6-6v8.25m.503 3.498 4.875-2.437c.381-.19.622-.58.622-1.006V4.82c0-.836-.88-1.38-1.628-1.006l-3.869 1.934c-.317.159-.69.159-1.006 0L9.503 3.252a1.125 1.125 0 0 0-1.006 0L3.622 5.689C3.24 5.88 3 6.27 3 6.695V19.18c0 .836.88 1.38 1.628 1.006l3.869-1.934c.317-.159.69-.159 1.006 0l4.994 2.497c.317.158.69.158 1.006 0Z"}))});t.Z=r}},function(e){e.O(0,[64,762,24,480,971,117,744],function(){return e(e.s=7590)}),_N_E=e.O()}]);