(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{3912:function(e,t,r){Promise.resolve().then(r.bind(r,1720))},1720:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return p}});var s=r(7437),a=r(2265),l=r(322),n=r(9289),i=r(3730),c=r(2930),o=r(6546),d=r(6331),m=r(1591),u=r(3519),x=r(954),h=r(654),v=r(4508);let g=e=>{let{title:t,value:r,icon:a,color:l,change:n}=e;return(0,s.jsx)("div",{className:"bg-white rounded-lg shadow-soft p-6 border border-gray-200",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-600",children:t}),(0,s.jsx)("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:r}),n&&(0,s.jsxs)("p",{className:"text-sm mt-1 ".concat(n>=0?"text-green-600":"text-red-600"),children:[n>=0?"+":"",n,"% from last month"]})]}),(0,s.jsx)("div",{className:"p-3 rounded-lg ".concat(l),children:(0,s.jsx)(a,{className:"h-6 w-6 text-white"})})]})})};function p(){let[e,t]=(0,a.useState)(null),[r,p]=(0,a.useState)(!0),{user:f}=(0,x.tN)(),{subscription:b}=(0,x.ZO)();return((0,a.useEffect)(()=>{(async()=>{try{var e,r,s,a,l;p(!0);let[n,i,c]=await Promise.all([h.JW.getVehicleStats().catch(()=>({data:{}})),h.ef.getTripStats("month").catch(()=>({data:{}})),h.W4.getUserStats().catch(()=>({data:{}}))]),o=await h.ef.getTrips({limit:5,sort:"createdAt",order:"desc"}).catch(()=>({data:[]}));t({totalVehicles:(null===(e=n.data)||void 0===e?void 0:e.total)||0,activeTrips:(null===(r=i.data)||void 0===r?void 0:r.activeTrips)||0,totalUsers:(null===(s=c.data)||void 0===s?void 0:s.total)||0,monthlyRevenue:(null===(a=i.data)||void 0===a?void 0:a.monthlyRevenue)||0,recentTrips:o.data||[],vehicleUtilization:(null===(l=n.data)||void 0===l?void 0:l.utilization)||0})}catch(e){console.error("Failed to fetch dashboard data:",e)}finally{p(!1)}})()},[]),r)?(0,s.jsxs)("div",{className:"min-h-screen",children:[(0,s.jsx)(m.Z,{title:"Dashboard",subtitle:"Welcome back to your transport management center"}),(0,s.jsx)("div",{className:"p-6",children:(0,s.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,s.jsx)(u.Z,{size:"lg"})})})]}):(0,s.jsxs)("div",{className:"min-h-screen",children:[(0,s.jsx)(m.Z,{title:"Dashboard",subtitle:"Welcome back, ".concat((null==f?void 0:f.fullName)||"User","! Here's what's happening with your transport service.")}),(0,s.jsxs)("div",{className:"p-6",children:[b&&"active"!==b.status&&(0,s.jsx)("div",{className:"mb-6 bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:(0,s.jsxs)("div",{className:"flex",children:[(0,s.jsx)("div",{className:"flex-shrink-0",children:(0,s.jsx)(l.Z,{className:"h-5 w-5 text-yellow-400"})}),(0,s.jsxs)("div",{className:"ml-3",children:[(0,s.jsxs)("h3",{className:"text-sm font-medium text-yellow-800",children:["Subscription Status: ",b.status.replace("_"," ").toUpperCase()]}),(0,s.jsxs)("p",{className:"mt-1 text-sm text-yellow-700",children:["pending_payment"===b.status&&"Please complete your payment to activate your subscription.","pending_approval"===b.status&&"Your payment is being reviewed. You'll be notified once approved.","expired"===b.status&&"Your subscription has expired. Please renew to continue using the service."]})]})]})}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[(0,s.jsx)(g,{title:"Total Vehicles",value:(null==e?void 0:e.totalVehicles)||0,icon:n.Z,color:"bg-blue-500",change:12}),(0,s.jsx)(g,{title:"Active Trips",value:(null==e?void 0:e.activeTrips)||0,icon:i.Z,color:"bg-green-500",change:8}),(0,s.jsx)(g,{title:"Team Members",value:(null==e?void 0:e.totalUsers)||0,icon:c.Z,color:"bg-purple-500",change:-2}),(0,s.jsx)(g,{title:"Monthly Revenue",value:(0,v.xG)((null==e?void 0:e.monthlyRevenue)||0),icon:o.Z,color:"bg-emerald-500",change:15})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,s.jsxs)("div",{className:"lg:col-span-2 bg-white rounded-lg shadow-soft border border-gray-200",children:[(0,s.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Recent Trips"})}),(0,s.jsx)("div",{className:"p-6",children:(null==e?void 0:e.recentTrips)&&e.recentTrips.length>0?(0,s.jsx)("div",{className:"space-y-4",children:e.recentTrips.map(e=>{var t,r,a,l,n,i;return(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium text-gray-900",children:(null===(t=e.customerInfo)||void 0===t?void 0:t.name)||"Unknown Customer"}),(0,s.jsxs)("p",{className:"text-sm text-gray-500",children:[null===(a=e.itinerary)||void 0===a?void 0:null===(r=a.pickupLocation)||void 0===r?void 0:r.address," â†’ ",null===(n=e.itinerary)||void 0===n?void 0:null===(l=n.dropoffLocation)||void 0===l?void 0:l.address]})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-900",children:(0,v.xG)((null===(i=e.pricing)||void 0===i?void 0:i.totalAmount)||0)}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:(0,v.p6)(e.createdAt)})]})]},e._id)})}):(0,s.jsxs)("div",{className:"text-center py-8",children:[(0,s.jsx)(i.Z,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),(0,s.jsx)("p",{className:"text-gray-500",children:"No trips yet"}),(0,s.jsx)("p",{className:"text-sm text-gray-400",children:"Start by adding your first trip"})]})})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-soft border border-gray-200",children:[(0,s.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Quick Actions"})}),(0,s.jsx)("div",{className:"p-6",children:(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)("button",{className:"w-full text-left p-3 rounded-lg border border-gray-200 hover:bg-gray-50 transition-colors",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(n.Z,{className:"h-5 w-5 text-gray-400 mr-3"}),(0,s.jsx)("span",{className:"text-sm font-medium",children:"Add New Vehicle"})]})}),(0,s.jsx)("button",{className:"w-full text-left p-3 rounded-lg border border-gray-200 hover:bg-gray-50 transition-colors",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(i.Z,{className:"h-5 w-5 text-gray-400 mr-3"}),(0,s.jsx)("span",{className:"text-sm font-medium",children:"Create Trip"})]})}),(0,s.jsx)("button",{className:"w-full text-left p-3 rounded-lg border border-gray-200 hover:bg-gray-50 transition-colors",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(c.Z,{className:"h-5 w-5 text-gray-400 mr-3"}),(0,s.jsx)("span",{className:"text-sm font-medium",children:"Invite User"})]})}),(0,s.jsx)("button",{className:"w-full text-left p-3 rounded-lg border border-gray-200 hover:bg-gray-50 transition-colors",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(d.Z,{className:"h-5 w-5 text-gray-400 mr-3"}),(0,s.jsx)("span",{className:"text-sm font-medium",children:"View Reports"})]})})]})})]})]})]})]})}},1591:function(e,t,r){"use strict";r.d(t,{Z:function(){return o}});var s=r(7437),a=r(2265),l=r(1556),n=r(3121),i=r(954),c=r(4508);function o(e){var t;let{title:r,subtitle:o}=e,[d,m]=(0,a.useState)(""),{user:u}=(0,i.tN)(),{subscription:x}=(0,i.ZO)();return(0,s.jsx)("div",{className:"bg-white border-b border-gray-200 px-6 py-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[r&&(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:r}),o&&(0,s.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:o})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsxs)("div",{className:"relative hidden md:block",children:[(0,s.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,s.jsx)(l.Z,{className:"h-4 w-4 text-gray-400"})}),(0,s.jsx)("input",{type:"text",placeholder:"Search...",value:d,onChange:e=>m(e.target.value),className:"block pl-9 pr-3 py-2 border border-gray-300 rounded-md text-sm placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 w-64"})]}),(0,s.jsx)("div",{className:"hidden sm:block",children:(0,s.jsx)("span",{className:(0,c.cn)("inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",(()=>{if(!x)return"bg-gray-100 text-gray-800";switch(x.status){case"active":return"bg-green-100 text-green-800";case"pending_payment":return"bg-yellow-100 text-yellow-800";case"pending_approval":return"bg-blue-100 text-blue-800";case"expired":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}})()),children:x?x.status.replace("_"," ").replace(/\b\w/g,e=>e.toUpperCase()):"No subscription"})}),(0,s.jsxs)("button",{type:"button",className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:[(0,s.jsx)("span",{className:"sr-only",children:"View notifications"}),(0,s.jsx)(n.Z,{className:"h-5 w-5","aria-hidden":"true"})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("div",{className:"w-8 h-8 bg-primary-100 rounded-full flex items-center justify-center",children:(0,s.jsx)("span",{className:"text-sm font-medium text-primary-700",children:null==u?void 0:null===(t=u.fullName)||void 0===t?void 0:t.split(" ").map(e=>e[0]).join("").slice(0,2)})}),(0,s.jsxs)("div",{className:"hidden md:block",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-900",children:null==u?void 0:u.fullName}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:null==u?void 0:u.email})]})]})]})]})})}},3121:function(e,t,r){"use strict";var s=r(2265);let a=s.forwardRef(function(e,t){let{title:r,titleId:a,...l}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},l),r?s.createElement("title",{id:a},r):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.857 17.082a23.848 23.848 0 0 0 5.454-1.31A8.967 8.967 0 0 1 18 9.75V9A6 6 0 0 0 6 9v.75a8.967 8.967 0 0 1-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 0 1-5.714 0m5.714 0a3 3 0 1 1-5.714 0"}))});t.Z=a},6331:function(e,t,r){"use strict";var s=r(2265);let a=s.forwardRef(function(e,t){let{title:r,titleId:a,...l}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},l),r?s.createElement("title",{id:a},r):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75ZM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625ZM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125Z"}))});t.Z=a},322:function(e,t,r){"use strict";var s=r(2265);let a=s.forwardRef(function(e,t){let{title:r,titleId:a,...l}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},l),r?s.createElement("title",{id:a},r):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))});t.Z=a},6546:function(e,t,r){"use strict";var s=r(2265);let a=s.forwardRef(function(e,t){let{title:r,titleId:a,...l}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},l),r?s.createElement("title",{id:a},r):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v12m-3-2.818.879.659c1.171.879 3.07.879 4.242 0 1.172-.879 1.172-2.303 0-3.182C13.536 12.219 12.768 12 12 12c-.725 0-1.45-.22-2.003-.659-1.106-.879-1.106-2.303 0-3.182s2.9-.879 4.006 0l.415.33M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))});t.Z=a},1556:function(e,t,r){"use strict";var s=r(2265);let a=s.forwardRef(function(e,t){let{title:r,titleId:a,...l}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},l),r?s.createElement("title",{id:a},r):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"}))});t.Z=a},3730:function(e,t,r){"use strict";var s=r(2265);let a=s.forwardRef(function(e,t){let{title:r,titleId:a,...l}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},l),r?s.createElement("title",{id:a},r):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 6.75V15m6-6v8.25m.503 3.498 4.875-2.437c.381-.19.622-.58.622-1.006V4.82c0-.836-.88-1.38-1.628-1.006l-3.869 1.934c-.317.159-.69.159-1.006 0L9.503 3.252a1.125 1.125 0 0 0-1.006 0L3.622 5.689C3.24 5.88 3 6.27 3 6.695V19.18c0 .836.88 1.38 1.628 1.006l3.869-1.934c.317-.159.69-.159 1.006 0l4.994 2.497c.317.158.69.158 1.006 0Z"}))});t.Z=a},9289:function(e,t,r){"use strict";var s=r(2265);let a=s.forwardRef(function(e,t){let{title:r,titleId:a,...l}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},l),r?s.createElement("title",{id:a},r):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 18.75a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m3 0h6m-9 0H3.375a1.125 1.125 0 0 1-1.125-1.125V14.25m17.25 4.5a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m3 0h1.125c.621 0 1.129-.504 1.09-1.124a17.902 17.902 0 0 0-3.213-9.193 2.056 2.056 0 0 0-1.58-.86H14.25M16.5 18.75h-2.25m0-11.177v-.958c0-.568-.422-1.048-.987-1.106a48.554 48.554 0 0 0-10.026 0 1.106 1.106 0 0 0-.987 1.106v7.635m12-6.677v6.677m0 4.5v-4.5m0 0h-12"}))});t.Z=a},2930:function(e,t,r){"use strict";var s=r(2265);let a=s.forwardRef(function(e,t){let{title:r,titleId:a,...l}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},l),r?s.createElement("title",{id:a},r):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19.128a9.38 9.38 0 0 0 2.625.372 9.337 9.337 0 0 0 4.121-.952 4.125 4.125 0 0 0-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 0 1 8.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0 1 11.964-3.07M12 6.375a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0Zm8.25 2.25a2.625 2.625 0 1 1-5.25 0 2.625 2.625 0 0 1 5.25 0Z"}))});t.Z=a}},function(e){e.O(0,[64,762,480,971,117,744],function(){return e(e.s=3912)}),_N_E=e.O()}]);