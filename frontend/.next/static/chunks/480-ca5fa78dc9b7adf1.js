"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[480],{3519:function(e,t,a){a.d(t,{Z:function(){return n}});var s=a(7437),i=a(4508);let r={sm:"h-4 w-4",md:"h-6 w-6",lg:"h-8 w-8",xl:"h-12 w-12"};function n(e){let{size:t="md",className:a}=e;return(0,s.jsx)("div",{className:(0,i.cn)("animate-spin rounded-full border-2 border-gray-300 border-t-primary-600",r[t],a)})}},4508:function(e,t,a){a.d(t,{Qm:function(){return d},cn:function(){return r},p6:function(){return n},xG:function(){return c},z2:function(){return o}});var s=a(1994),i=a(3335);function r(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,i.m6)((0,s.W)(t))}let n=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),c=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e),o=e=>{switch(e.toLowerCase()){case"active":return"text-green-600 bg-green-100";case"pending":return"text-yellow-600 bg-yellow-100";case"expired":case"inactive":return"text-red-600 bg-red-100";case"pending_approval":return"text-blue-600 bg-blue-100";default:return"text-gray-600 bg-gray-100"}},d=e=>e.split(" ").map(e=>e.charAt(0).toUpperCase()).join("").slice(0,2)},654:function(e,t,a){a.d(t,{ON:function(){return o},AB:function(){return l},ef:function(){return v},W4:function(){return y},JW:function(){return p}});var s=a(3464),i=a(9064),r=a(4131);let n=s.Z.create({baseURL:"https://arwapark.digima.cloud/api",timeout:3e4,headers:{"Content-Type":"application/json"}});n.interceptors.request.use(e=>{let t=r.Z.get("auth-token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e)),n.interceptors.response.use(e=>e,e=>{var t,a,s,n,c;let o=function(e){var t;if((null===(t=e.response)||void 0===t?void 0:t.data)&&"object"==typeof e.response.data){let t=e.response.data;return t.message||t.error||"An error occurred"}return e.message||"An error occurred"}(e);return(null===(t=e.response)||void 0===t?void 0:t.status)===401?(r.Z.remove("auth-token"),window.location.href="/login"):(null===(a=e.response)||void 0===a?void 0:a.status)===403?i.Am.error("Access denied. Insufficient permissions."):(null===(s=e.response)||void 0===s?void 0:s.status)===404?i.Am.error("Resource not found."):(null===(n=e.response)||void 0===n?void 0:n.status)===429?i.Am.error("Too many requests. Please try again later."):(null===(c=e.response)||void 0===c?void 0:c.status)>=500?i.Am.error("Server error. Please try again later."):"ECONNABORTED"===e.code?i.Am.error("Request timeout. Please check your connection."):"ERR_NETWORK"===e.code?i.Am.error("Network error. Please check your connection."):i.Am.error(o),Promise.reject(e)});class c{async login(e){try{let t=await n.post("/api/v1/auth/login",e),{user:a,token:s}=t.data;return r.Z.set("auth-token",s,{expires:7,secure:!0,sameSite:"strict"}),t.data}catch(e){throw e}}async logout(){try{await n.post("/api/v1/auth/logout")}catch(e){console.error("Logout API error:",e)}finally{r.Z.remove("auth-token")}}async refreshToken(){try{let e=await n.post("/api/v1/auth/refresh"),{token:t}=e.data;return r.Z.set("auth-token",t,{expires:7,secure:!0,sameSite:"strict"}),e.data}catch(e){throw r.Z.remove("auth-token"),window.location.href="/login",e}}async getProfile(){try{return(await n.get("/api/v1/auth/profile")).data}catch(e){throw e}}getToken(){return r.Z.get("auth-token")}isAuthenticated(){return!!this.getToken()}}var o=new c;class d{async getCurrentSubscription(){return(await n.get("/api/v1/subscriptions/me")).data}async getPlans(){return(await n.get("/api/v1/subscriptions/plans")).data}async requestSubscription(e){return(await n.post("/api/v1/subscriptions/request",e)).data}async uploadPaymentProof(e,t){let a=new FormData;return a.append("paymentProof",t),(await n.post("/api/v1/subscriptions/".concat(e,"/upload-proof"),a,{headers:{"Content-Type":"multipart/form-data"}})).data}async getUsageStats(){return(await n.get("/api/v1/subscriptions/usage")).data}async cancelSubscription(e){return(await n.post("/api/v1/subscriptions/".concat(e,"/cancel"))).data}async renewSubscription(e,t){return(await n.post("/api/v1/subscriptions/".concat(e,"/renew"),{planId:t})).data}async getAllSubscriptions(e){return(await n.get("/api/v1/subscriptions",{params:e})).data}async approveSubscription(e){return(await n.post("/api/v1/subscriptions/".concat(e,"/approve"))).data}async rejectSubscription(e,t){return(await n.post("/api/v1/subscriptions/".concat(e,"/reject"),{reason:t})).data}}var l=new d;class u{async getVehicles(e){return(await n.get("/api/v1/vehicles",{params:e})).data}async getVehicleById(e){return(await n.get("/api/v1/vehicles/".concat(e))).data}async createVehicle(e){return(await n.post("/api/v1/vehicles",e)).data}async updateVehicle(e,t){return(await n.put("/api/v1/vehicles/".concat(e),t)).data}async deleteVehicle(e){return(await n.delete("/api/v1/vehicles/".concat(e))).data}async updateVehicleStatus(e,t){return(await n.patch("/api/v1/vehicles/".concat(e,"/status"),{status:t})).data}async uploadVehicleImages(e,t){let a=new FormData;return t.forEach(e=>{a.append("images",e)}),(await n.post("/api/v1/vehicles/".concat(e,"/images"),a,{headers:{"Content-Type":"multipart/form-data"}})).data}async getVehicleStats(){return(await n.get("/api/v1/vehicles/stats")).data}async getAvailableVehicles(e){return(await n.get("/api/v1/vehicles/available",{params:{datetime:e}})).data}}var p=new u;class g{async getTrips(e){return(await n.get("/api/v1/trips",{params:e})).data}async getTripById(e){return(await n.get("/api/v1/trips/".concat(e))).data}async createTrip(e){return(await n.post("/api/v1/trips",e)).data}async updateTrip(e,t){return(await n.put("/api/v1/trips/".concat(e),t)).data}async updateTripStatus(e,t){return(await n.patch("/api/v1/trips/".concat(e,"/status"),{status:t})).data}async updatePaymentStatus(e,t){return(await n.patch("/api/v1/trips/".concat(e,"/payment-status"),{paymentStatus:t})).data}async deleteTrip(e){return(await n.delete("/api/v1/trips/".concat(e))).data}async addTripRating(e,t){return(await n.post("/api/v1/trips/".concat(e,"/rating"),t)).data}async getTripStats(e){return(await n.get("/api/v1/trips/stats",{params:{period:e}})).data}async getRevenueStats(e){return(await n.get("/api/v1/trips/revenue",{params:{period:e}})).data}async exportTrips(e){return(await n.get("/api/v1/trips/export",{params:e,responseType:"blob"})).data}}var v=new g;class h{async getUsers(e){return(await n.get("/api/v1/users",{params:e})).data}async getUserById(e){return(await n.get("/api/v1/users/".concat(e))).data}async createUser(e){return(await n.post("/api/v1/users",e)).data}async updateUser(e,t){return(await n.put("/api/v1/users/".concat(e),t)).data}async deleteUser(e){return(await n.delete("/api/v1/users/".concat(e))).data}async toggleUserStatus(e,t){return(await n.patch("/api/v1/users/".concat(e,"/status"),{isActive:t})).data}async changePassword(e,t){return(await n.post("/api/v1/users/".concat(e,"/change-password"),t)).data}async resetPassword(e){return(await n.post("/api/v1/users/".concat(e,"/reset-password"))).data}async getUserStats(){return(await n.get("/api/v1/users/stats")).data}async getUsersByAgency(e){return(await n.get("/api/v1/users/agency/".concat(e))).data}async inviteUser(e){return(await n.post("/api/v1/users/invite",e)).data}}var y=new h;class m{async getAgencies(e){return(await n.get("/api/v1/agencies",{params:e})).data}async getAgencyById(e){return(await n.get("/api/v1/agencies/".concat(e))).data}async getCurrentAgency(){return(await n.get("/api/v1/agencies/me")).data}async createAgency(e){return(await n.post("/api/v1/agencies",e)).data}async updateAgency(e,t){return(await n.put("/api/v1/agencies/".concat(e),t)).data}async updateCurrentAgency(e){return(await n.put("/api/v1/agencies/me",e)).data}async deleteAgency(e){return(await n.delete("/api/v1/agencies/".concat(e))).data}async toggleAgencyStatus(e,t){return(await n.patch("/api/v1/agencies/".concat(e,"/status"),{isActive:t})).data}async getAgencyStats(e){return(await n.get(e?"/api/v1/agencies/".concat(e,"/stats"):"/api/v1/agencies/me/stats")).data}async uploadLogo(e,t){let a=new FormData;return a.append("logo",t),(await n.post("/api/v1/agencies/".concat(e,"/logo"),a,{headers:{"Content-Type":"multipart/form-data"}})).data}}new m},954:function(e,t,a){a.d(t,{tN:function(){return c},ZO:function(){return o},BD:function(){return l},LM:function(){return u},bW:function(){return d}});var s=a(9625),i=a(6885),r=a(9064),n=a(654);let c=(0,s.Ue)()((0,i.tJ)((e,t)=>({user:null,token:null,isLoading:!1,isAuthenticated:!1,login:async t=>{try{e({isLoading:!0});let a=await n.ON.login(t);e({user:a.user,token:a.token,isAuthenticated:!0,isLoading:!1}),r.Am.success("Welcome back, ".concat(a.user.fullName,"!"))}catch(i){var a,s;e({isLoading:!1});let t=(null===(s=i.response)||void 0===s?void 0:null===(a=s.data)||void 0===a?void 0:a.message)||"Login failed";throw r.Am.error(t),i}},logout:()=>{n.ON.logout(),e({user:null,token:null,isAuthenticated:!1,isLoading:!1}),r.Am.success("Logged out successfully"),window.location.href="/login"},refreshToken:async()=>{try{let t=await n.ON.refreshToken();e({token:t.token})}catch(e){throw t().logout(),e}},checkAuth:async()=>{if(!n.ON.isAuthenticated()){e({isAuthenticated:!1,user:null,token:null});return}try{e({isLoading:!0});let t=await n.ON.getProfile();e({user:t.data,token:n.ON.getToken()||null,isAuthenticated:!0,isLoading:!1})}catch(t){e({user:null,token:null,isAuthenticated:!1,isLoading:!1}),n.ON.logout()}},setLoading:t=>{e({isLoading:t})},initialize:()=>{t().checkAuth()}}),{name:"auth-store",partialize:e=>({user:e.user,isAuthenticated:e.isAuthenticated})})),o=(0,s.Ue)()((e,t)=>({subscription:null,plans:[],usage:null,isLoading:!1,fetchCurrentSubscription:async()=>{try{e({isLoading:!0});let t=await n.AB.getCurrentSubscription();e({subscription:t.data,isLoading:!1})}catch(a){var t;e({isLoading:!1}),(null===(t=a.response)||void 0===t?void 0:t.status)!==404&&r.Am.error("Failed to fetch subscription")}},fetchPlans:async()=>{try{let t=await n.AB.getPlans();e({plans:t.data})}catch(e){r.Am.error("Failed to fetch subscription plans")}},fetchUsage:async()=>{try{let t=await n.AB.getUsageStats();e({usage:t.data})}catch(e){r.Am.error("Failed to fetch usage statistics")}},requestSubscription:async t=>{try{e({isLoading:!0});let a=await n.AB.requestSubscription({planId:t,agencyId:""});e({subscription:a.data,isLoading:!1}),r.Am.success("Subscription requested successfully! Please proceed with payment.")}catch(i){var a,s;e({isLoading:!1});let t=(null===(s=i.response)||void 0===s?void 0:null===(a=s.data)||void 0===a?void 0:a.message)||"Failed to request subscription";throw r.Am.error(t),i}},uploadPaymentProof:async(a,s)=>{try{e({isLoading:!0}),await n.AB.uploadPaymentProof(a,s),await t().fetchCurrentSubscription(),r.Am.success("Payment proof uploaded successfully! Your subscription is now pending approval.")}catch(a){var i,c;e({isLoading:!1});let t=(null===(c=a.response)||void 0===c?void 0:null===(i=c.data)||void 0===i?void 0:i.message)||"Failed to upload payment proof";throw r.Am.error(t),a}},cancelSubscription:async a=>{try{e({isLoading:!0}),await n.AB.cancelSubscription(a),await t().fetchCurrentSubscription(),r.Am.success("Subscription cancelled successfully")}catch(a){var s,i;e({isLoading:!1});let t=(null===(i=a.response)||void 0===i?void 0:null===(s=i.data)||void 0===s?void 0:s.message)||"Failed to cancel subscription";throw r.Am.error(t),a}},renewSubscription:async(t,a)=>{try{e({isLoading:!0});let s=await n.AB.renewSubscription(t,a);e({subscription:s.data,isLoading:!1}),r.Am.success("Subscription renewed successfully! Please proceed with payment.")}catch(a){var s,i;e({isLoading:!1});let t=(null===(i=a.response)||void 0===i?void 0:null===(s=i.data)||void 0===s?void 0:s.message)||"Failed to renew subscription";throw r.Am.error(t),a}},setLoading:t=>{e({isLoading:t})}})),d=(0,s.Ue)()((e,t)=>({vehicles:[],selectedVehicle:null,pagination:{page:1,limit:10,total:0,pages:0},filters:{},isLoading:!1,stats:null,fetchVehicles:async()=>{try{e({isLoading:!0});let{pagination:a,filters:s}=t(),i=await n.JW.getVehicles({page:a.page,limit:a.limit,...s});e({vehicles:i.data,pagination:i.pagination,isLoading:!1})}catch(t){e({isLoading:!1}),r.Am.error("Failed to fetch vehicles")}},fetchVehicleById:async t=>{try{e({isLoading:!0});let a=await n.JW.getVehicleById(t);e({selectedVehicle:a.data,isLoading:!1})}catch(t){e({isLoading:!1}),r.Am.error("Failed to fetch vehicle details")}},createVehicle:async a=>{try{e({isLoading:!0}),await n.JW.createVehicle(a),await t().fetchVehicles(),r.Am.success("Vehicle created successfully")}catch(a){var s,i;e({isLoading:!1});let t=(null===(i=a.response)||void 0===i?void 0:null===(s=i.data)||void 0===s?void 0:s.message)||"Failed to create vehicle";throw r.Am.error(t),a}},updateVehicle:async(t,a)=>{try{e({isLoading:!0});let s=await n.JW.updateVehicle(t,a);e(e=>{var a;return{vehicles:e.vehicles.map(e=>e._id===t?s.data:e),selectedVehicle:(null===(a=e.selectedVehicle)||void 0===a?void 0:a._id)===t?s.data:e.selectedVehicle,isLoading:!1}}),r.Am.success("Vehicle updated successfully")}catch(a){var s,i;e({isLoading:!1});let t=(null===(i=a.response)||void 0===i?void 0:null===(s=i.data)||void 0===s?void 0:s.message)||"Failed to update vehicle";throw r.Am.error(t),a}},deleteVehicle:async t=>{try{e({isLoading:!0}),await n.JW.deleteVehicle(t),e(e=>{var a;return{vehicles:e.vehicles.filter(e=>e._id!==t),selectedVehicle:(null===(a=e.selectedVehicle)||void 0===a?void 0:a._id)===t?null:e.selectedVehicle,isLoading:!1}}),r.Am.success("Vehicle deleted successfully")}catch(i){var a,s;e({isLoading:!1});let t=(null===(s=i.response)||void 0===s?void 0:null===(a=s.data)||void 0===a?void 0:a.message)||"Failed to delete vehicle";throw r.Am.error(t),i}},updateVehicleStatus:async(t,a)=>{try{let s=await n.JW.updateVehicleStatus(t,a);e(e=>{var a;return{vehicles:e.vehicles.map(e=>e._id===t?s.data:e),selectedVehicle:(null===(a=e.selectedVehicle)||void 0===a?void 0:a._id)===t?s.data:e.selectedVehicle}}),r.Am.success("Vehicle status updated to ".concat(a))}catch(t){var s,i;let e=(null===(i=t.response)||void 0===i?void 0:null===(s=i.data)||void 0===s?void 0:s.message)||"Failed to update vehicle status";throw r.Am.error(e),t}},uploadVehicleImages:async(a,s)=>{try{e({isLoading:!0}),await n.JW.uploadVehicleImages(a,s),await t().fetchVehicleById(a),r.Am.success("Vehicle images uploaded successfully")}catch(a){var i,c;e({isLoading:!1});let t=(null===(c=a.response)||void 0===c?void 0:null===(i=c.data)||void 0===i?void 0:i.message)||"Failed to upload vehicle images";throw r.Am.error(t),a}},fetchVehicleStats:async()=>{try{let t=await n.JW.getVehicleStats();e({stats:t.data})}catch(e){r.Am.error("Failed to fetch vehicle statistics")}},setFilters:a=>{e({filters:a,pagination:{...t().pagination,page:1}}),t().fetchVehicles()},setPagination:(a,s)=>{let i=t().pagination;e({pagination:{...i,page:a,limit:s||i.limit}}),t().fetchVehicles()},setLoading:t=>{e({isLoading:t})},clearSelectedVehicle:()=>{e({selectedVehicle:null})}})),l=(0,s.Ue)()((e,t)=>({trips:[],selectedTrip:null,pagination:{page:1,limit:10,total:0,pages:0},filters:{},isLoading:!1,stats:null,fetchTrips:async()=>{try{e({isLoading:!0});let{pagination:a,filters:s}=t(),i=await n.ef.getTrips({page:a.page,limit:a.limit,...s});e({trips:i.data,pagination:i.pagination,isLoading:!1})}catch(t){e({isLoading:!1}),r.Am.error("Failed to fetch trips")}},fetchTripById:async t=>{try{e({isLoading:!0});let a=await n.ef.getTripById(t);e({selectedTrip:a.data,isLoading:!1})}catch(t){e({isLoading:!1}),r.Am.error("Failed to fetch trip details")}},createTrip:async a=>{try{e({isLoading:!0}),await n.ef.createTrip(a),await t().fetchTrips(),r.Am.success("Trip created successfully")}catch(a){var s,i;e({isLoading:!1});let t=(null===(i=a.response)||void 0===i?void 0:null===(s=i.data)||void 0===s?void 0:s.message)||"Failed to create trip";throw r.Am.error(t),a}},updateTrip:async(t,a)=>{try{e({isLoading:!0});let s=await n.ef.updateTrip(t,a);e(e=>{var a;return{trips:e.trips.map(e=>e._id===t?s.data:e),selectedTrip:(null===(a=e.selectedTrip)||void 0===a?void 0:a._id)===t?s.data:e.selectedTrip,isLoading:!1}}),r.Am.success("Trip updated successfully")}catch(a){var s,i;e({isLoading:!1});let t=(null===(i=a.response)||void 0===i?void 0:null===(s=i.data)||void 0===s?void 0:s.message)||"Failed to update trip";throw r.Am.error(t),a}},updateTripStatus:async(t,a)=>{try{let s=await n.ef.updateTripStatus(t,a);e(e=>{var a;return{trips:e.trips.map(e=>e._id===t?s.data:e),selectedTrip:(null===(a=e.selectedTrip)||void 0===a?void 0:a._id)===t?s.data:e.selectedTrip}}),r.Am.success("Trip status updated to ".concat(a))}catch(t){var s,i;let e=(null===(i=t.response)||void 0===i?void 0:null===(s=i.data)||void 0===s?void 0:s.message)||"Failed to update trip status";throw r.Am.error(e),t}},updatePaymentStatus:async(t,a)=>{try{let s=await n.ef.updatePaymentStatus(t,a);e(e=>{var a;return{trips:e.trips.map(e=>e._id===t?s.data:e),selectedTrip:(null===(a=e.selectedTrip)||void 0===a?void 0:a._id)===t?s.data:e.selectedTrip}}),r.Am.success("Payment status updated to ".concat(a))}catch(t){var s,i;let e=(null===(i=t.response)||void 0===i?void 0:null===(s=i.data)||void 0===s?void 0:s.message)||"Failed to update payment status";throw r.Am.error(e),t}},deleteTrip:async t=>{try{e({isLoading:!0}),await n.ef.deleteTrip(t),e(e=>{var a;return{trips:e.trips.filter(e=>e._id!==t),selectedTrip:(null===(a=e.selectedTrip)||void 0===a?void 0:a._id)===t?null:e.selectedTrip,isLoading:!1}}),r.Am.success("Trip deleted successfully")}catch(i){var a,s;e({isLoading:!1});let t=(null===(s=i.response)||void 0===s?void 0:null===(a=s.data)||void 0===a?void 0:a.message)||"Failed to delete trip";throw r.Am.error(t),i}},addTripRating:async(t,a)=>{try{let s=await n.ef.addTripRating(t,a);e(e=>{var a;return{trips:e.trips.map(e=>e._id===t?s.data:e),selectedTrip:(null===(a=e.selectedTrip)||void 0===a?void 0:a._id)===t?s.data:e.selectedTrip}}),r.Am.success("Rating added successfully")}catch(t){var s,i;let e=(null===(i=t.response)||void 0===i?void 0:null===(s=i.data)||void 0===s?void 0:s.message)||"Failed to add rating";throw r.Am.error(e),t}},fetchTripStats:async t=>{try{let a=await n.ef.getTripStats(t);e({stats:a.data})}catch(e){r.Am.error("Failed to fetch trip statistics")}},exportTrips:async()=>{try{let{filters:e}=t(),a=await n.ef.exportTrips(e),s=window.URL.createObjectURL(a),i=document.createElement("a");i.href=s,i.download="trips-".concat(new Date().toISOString().split("T")[0],".csv"),document.body.appendChild(i),i.click(),window.URL.revokeObjectURL(s),document.body.removeChild(i),r.Am.success("Trips exported successfully")}catch(s){var e,a;let t=(null===(a=s.response)||void 0===a?void 0:null===(e=a.data)||void 0===e?void 0:e.message)||"Failed to export trips";r.Am.error(t)}},setFilters:a=>{e({filters:a,pagination:{...t().pagination,page:1}}),t().fetchTrips()},setPagination:(a,s)=>{let i=t().pagination;e({pagination:{...i,page:a,limit:s||i.limit}}),t().fetchTrips()},setLoading:t=>{e({isLoading:t})},clearSelectedTrip:()=>{e({selectedTrip:null})}})),u=(0,s.Ue)()((e,t)=>({users:[],selectedUser:null,pagination:{page:1,limit:10,total:0,pages:0},filters:{},isLoading:!1,stats:null,fetchUsers:async()=>{try{e({isLoading:!0});let{pagination:a,filters:s}=t(),i=await n.W4.getUsers({page:a.page,limit:a.limit,...s});e({users:i.data,pagination:i.pagination,isLoading:!1})}catch(t){e({isLoading:!1}),r.Am.error("Failed to fetch users")}},fetchUserById:async t=>{try{e({isLoading:!0});let a=await n.W4.getUserById(t);e({selectedUser:a.data,isLoading:!1})}catch(t){e({isLoading:!1}),r.Am.error("Failed to fetch user details")}},createUser:async a=>{try{e({isLoading:!0}),await n.W4.createUser(a),await t().fetchUsers(),r.Am.success("User created successfully")}catch(a){var s,i;e({isLoading:!1});let t=(null===(i=a.response)||void 0===i?void 0:null===(s=i.data)||void 0===s?void 0:s.message)||"Failed to create user";throw r.Am.error(t),a}},updateUser:async(t,a)=>{try{e({isLoading:!0});let s=await n.W4.updateUser(t,a);e(e=>{var a;return{users:e.users.map(e=>e._id===t?s.data:e),selectedUser:(null===(a=e.selectedUser)||void 0===a?void 0:a._id)===t?s.data:e.selectedUser,isLoading:!1}}),r.Am.success("User updated successfully")}catch(a){var s,i;e({isLoading:!1});let t=(null===(i=a.response)||void 0===i?void 0:null===(s=i.data)||void 0===s?void 0:s.message)||"Failed to update user";throw r.Am.error(t),a}},deleteUser:async t=>{try{e({isLoading:!0}),await n.W4.deleteUser(t),e(e=>{var a;return{users:e.users.filter(e=>e._id!==t),selectedUser:(null===(a=e.selectedUser)||void 0===a?void 0:a._id)===t?null:e.selectedUser,isLoading:!1}}),r.Am.success("User deleted successfully")}catch(i){var a,s;e({isLoading:!1});let t=(null===(s=i.response)||void 0===s?void 0:null===(a=s.data)||void 0===a?void 0:a.message)||"Failed to delete user";throw r.Am.error(t),i}},toggleUserStatus:async(t,a)=>{try{let s=await n.W4.toggleUserStatus(t,a);e(e=>{var a;return{users:e.users.map(e=>e._id===t?s.data:e),selectedUser:(null===(a=e.selectedUser)||void 0===a?void 0:a._id)===t?s.data:e.selectedUser}}),r.Am.success("User ".concat(a?"activated":"deactivated"," successfully"))}catch(t){var s,i;let e=(null===(i=t.response)||void 0===i?void 0:null===(s=i.data)||void 0===s?void 0:s.message)||"Failed to update user status";throw r.Am.error(e),t}},changePassword:async(e,t)=>{try{await n.W4.changePassword(e,t),r.Am.success("Password changed successfully")}catch(t){var a,s;let e=(null===(s=t.response)||void 0===s?void 0:null===(a=s.data)||void 0===a?void 0:a.message)||"Failed to change password";throw r.Am.error(e),t}},resetPassword:async e=>{try{let t=await n.W4.resetPassword(e);return r.Am.success("Password reset successfully"),t.data.temporaryPassword}catch(s){var t,a;let e=(null===(a=s.response)||void 0===a?void 0:null===(t=a.data)||void 0===t?void 0:t.message)||"Failed to reset password";throw r.Am.error(e),s}},inviteUser:async t=>{try{e({isLoading:!0}),await n.W4.inviteUser(t),e({isLoading:!1}),r.Am.success("User invitation sent successfully")}catch(i){var a,s;e({isLoading:!1});let t=(null===(s=i.response)||void 0===s?void 0:null===(a=s.data)||void 0===a?void 0:a.message)||"Failed to send user invitation";throw r.Am.error(t),i}},fetchUserStats:async()=>{try{let t=await n.W4.getUserStats();e({stats:t.data})}catch(e){r.Am.error("Failed to fetch user statistics")}},setFilters:a=>{e({filters:a,pagination:{...t().pagination,page:1}}),t().fetchUsers()},setPagination:(a,s)=>{let i=t().pagination;e({pagination:{...i,page:a,limit:s||i.limit}}),t().fetchUsers()},setLoading:t=>{e({isLoading:t})},clearSelectedUser:()=>{e({selectedUser:null})}}))}}]);