(()=>{var e={};e.id=953,e.ids=[953],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},7790:e=>{"use strict";e.exports=require("assert")},4770:e=>{"use strict";e.exports=require("crypto")},7702:e=>{"use strict";e.exports=require("events")},2048:e=>{"use strict";e.exports=require("fs")},2615:e=>{"use strict";e.exports=require("http")},2694:e=>{"use strict";e.exports=require("http2")},8791:e=>{"use strict";e.exports=require("https")},9801:e=>{"use strict";e.exports=require("os")},5315:e=>{"use strict";e.exports=require("path")},6162:e=>{"use strict";e.exports=require("stream")},4175:e=>{"use strict";e.exports=require("tty")},7360:e=>{"use strict";e.exports=require("url")},1764:e=>{"use strict";e.exports=require("util")},1568:e=>{"use strict";e.exports=require("zlib")},3539:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>o,routeModule:()=>u,tree:()=>d}),s(4378),s(3321),s(1506),s(5866);var r=s(3191),a=s(8716),n=s(7922),i=s.n(n),l=s(5231),c={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>l[e]);s.d(t,c);let d=["",{children:["dashboard",{children:["trips",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,4378)),"/Users/mac/Desktop/degima/arwa-park/frontend/app/dashboard/trips/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,3321)),"/Users/mac/Desktop/degima/arwa-park/frontend/app/dashboard/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,1506)),"/Users/mac/Desktop/degima/arwa-park/frontend/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}],o=["/Users/mac/Desktop/degima/arwa-park/frontend/app/dashboard/trips/page.tsx"],m="/dashboard/trips/page",x={require:s,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/dashboard/trips/page",pathname:"/dashboard/trips",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},1651:(e,t,s)=>{Promise.resolve().then(s.bind(s,327))},327:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>C});var r=s(326),a=s(7577),n=s(5047),i=s(6421),l=s(3401);let c=a.forwardRef(function({title:e,titleId:t,...s},r){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},s),e?a.createElement("title",{id:t},e):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))});var d=s(3583),o=s(6229),m=s(1217),x=s(4526),u=s(1367),p=s(2560),h=s(4625),g=s(6805),b=s(3036),f=s(6865),j=s(8825),y=s(1969),v=s(7863);let w=[{value:"",label:"All Statuses"},{value:"pending",label:"Pending"},{value:"confirmed",label:"Confirmed"},{value:"in_progress",label:"In Progress"},{value:"completed",label:"Completed"},{value:"cancelled",label:"Cancelled"}],N=[{value:"",label:"All Payment Status"},{value:"pending",label:"Payment Pending"},{value:"paid",label:"Paid"},{value:"refunded",label:"Refunded"}],k=({trip:e,onEdit:t,onView:s,onStatusChange:a,onPaymentStatusChange:n})=>(0,r.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6 card-hover",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(e=>{switch(e){case"pending":return r.jsx(i.Z,{className:"w-5 h-5 text-yellow-500"});case"confirmed":case"in_progress":return r.jsx(l.Z,{className:"w-5 h-5 text-blue-500"});case"completed":return r.jsx(l.Z,{className:"w-5 h-5 text-green-500"});case"cancelled":return r.jsx(c,{className:"w-5 h-5 text-red-500"});default:return r.jsx(d.Z,{className:"w-5 h-5 text-gray-500"})}})(e.status),(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900",children:e.customerInfo.name}),(0,r.jsxs)("p",{className:"text-sm text-gray-500",children:[e.customerInfo.numberOfPassengers," passengers"]})]})]}),(0,r.jsxs)(g.v,{as:"div",className:"relative",children:[r.jsx(g.v.Button,{className:"p-2 text-gray-400 hover:text-gray-600 rounded-lg hover:bg-gray-50",children:r.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{d:"M10 6a2 2 0 110-4 2 2 0 010 4zM10 12a2 2 0 110-4 2 2 0 010 4zM10 18a2 2 0 110-4 2 2 0 010 4z"})})}),(0,r.jsxs)(g.v.Items,{className:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none z-10",children:[r.jsx(g.v.Item,{children:({active:t})=>(0,r.jsxs)("button",{onClick:()=>s(e),className:(0,v.cn)(t?"bg-gray-50":"","flex w-full items-center px-4 py-2 text-sm text-gray-700"),children:[r.jsx(o.Z,{className:"mr-3 h-4 w-4"}),"View Details"]})}),r.jsx(g.v.Item,{children:({active:s})=>(0,r.jsxs)("button",{onClick:()=>t(e),className:(0,v.cn)(s?"bg-gray-50":"","flex w-full items-center px-4 py-2 text-sm text-gray-700"),children:[r.jsx(m.Z,{className:"mr-3 h-4 w-4"}),"Edit Trip"]})}),"pending"===e.status&&r.jsx(g.v.Item,{children:({active:t})=>(0,r.jsxs)("button",{onClick:()=>a(e,"confirmed"),className:(0,v.cn)(t?"bg-gray-50":"","flex w-full items-center px-4 py-2 text-sm text-green-600"),children:[r.jsx(l.Z,{className:"mr-3 h-4 w-4"}),"Confirm Trip"]})}),"confirmed"===e.status&&r.jsx(g.v.Item,{children:({active:t})=>r.jsx("button",{onClick:()=>a(e,"in_progress"),className:(0,v.cn)(t?"bg-gray-50":"","flex w-full items-center px-4 py-2 text-sm text-blue-600"),children:"Start Trip"})}),"in_progress"===e.status&&r.jsx(g.v.Item,{children:({active:t})=>r.jsx("button",{onClick:()=>a(e,"completed"),className:(0,v.cn)(t?"bg-gray-50":"","flex w-full items-center px-4 py-2 text-sm text-green-600"),children:"Complete Trip"})}),"pending"===e.paymentStatus&&r.jsx(g.v.Item,{children:({active:t})=>(0,r.jsxs)("button",{onClick:()=>n(e,"paid"),className:(0,v.cn)(t?"bg-gray-50":"","flex w-full items-center px-4 py-2 text-sm text-green-600"),children:[r.jsx(x.Z,{className:"mr-3 h-4 w-4"}),"Mark Paid"]})}),["pending","confirmed"].includes(e.status)&&r.jsx(g.v.Item,{children:({active:t})=>(0,r.jsxs)("button",{onClick:()=>a(e,"cancelled"),className:(0,v.cn)(t?"bg-gray-50":"","flex w-full items-center px-4 py-2 text-sm text-red-600"),children:[r.jsx(c,{className:"mr-3 h-4 w-4"}),"Cancel Trip"]})})]})]})]}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"text-sm",children:[r.jsx("p",{className:"font-medium text-gray-900",children:"Route:"}),r.jsx("p",{className:"text-gray-600",children:e.itinerary.pickupLocation.address}),r.jsx("p",{className:"text-gray-400 text-xs",children:"â†“"}),r.jsx("p",{className:"text-gray-600",children:e.itinerary.dropoffLocation.address})]}),r.jsx("div",{className:"flex items-center justify-between text-sm",children:(0,r.jsxs)("div",{children:[r.jsx("span",{className:"text-gray-500",children:"Pickup:"}),r.jsx("span",{className:"ml-2 font-medium text-gray-900",children:new Date(e.itinerary.pickupTime).toLocaleString()})]})}),e.vehicleId&&(0,r.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[r.jsx("span",{className:"text-gray-500",children:"Vehicle:"}),r.jsx("span",{className:"font-medium text-gray-900",children:"object"==typeof e.vehicleId?e.vehicleId.plateNumber:"Unknown"})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:(0,v.cn)("inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",(0,v.z2)(e.status)),children:e.status.charAt(0).toUpperCase()+e.status.slice(1).replace("_"," ")}),r.jsx("span",{className:(0,v.cn)("inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",(0,v.z2)(e.paymentStatus)),children:e.paymentStatus.charAt(0).toUpperCase()+e.paymentStatus.slice(1)})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between pt-3 border-t border-gray-200",children:[r.jsx("span",{className:"text-lg font-bold text-gray-900",children:(0,v.xG)(e.pricing.totalAmount)}),r.jsx("span",{className:"text-xs text-gray-500",children:(0,v.p6)(e.createdAt)})]})]})]});function C(){let e=(0,n.useRouter)(),[t,s]=(0,a.useState)(""),[i,l]=(0,a.useState)(!1),{trips:c,pagination:o,filters:m,isLoading:x,fetchTrips:g,setFilters:C,setPagination:P,updateTripStatus:_,updatePaymentStatus:Z}=(0,y.BD)(),{user:S}=(0,y.tN)(),q=e=>{s(e),C({...m,search:e})},E=(e,t)=>{C({...m,[e]:t||void 0})},M=async(e,t)=>{try{await _(e._id,t)}catch(e){}},I=async(e,t)=>{try{await Z(e._id,t)}catch(e){}},A=t=>{e.push(`/dashboard/trips/${t._id}/edit`)},L=t=>{e.push(`/dashboard/trips/${t._id}`)},R=e=>{P(e)};return x&&0===c.length?(0,r.jsxs)("div",{className:"min-h-screen",children:[r.jsx(b.Z,{title:"Trips",subtitle:"Manage your transportation bookings"}),r.jsx("div",{className:"p-6",children:r.jsx("div",{className:"flex items-center justify-center py-12",children:r.jsx(f.Z,{size:"lg"})})})]}):(0,r.jsxs)("div",{className:"min-h-screen",children:[r.jsx(b.Z,{title:"Trips",subtitle:"Manage your transportation bookings and schedules"}),(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsxs)("div",{className:"relative",children:[r.jsx(u.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),r.jsx("input",{type:"text",placeholder:"Search trips...",value:t,onChange:e=>q(e.target.value),className:"pl-9 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 w-64"})]}),(0,r.jsxs)("button",{onClick:()=>l(!i),className:"btn-secondary flex items-center",children:[r.jsx(p.Z,{className:"h-4 w-4 mr-2"}),"Filters"]})]}),(0,r.jsxs)("button",{onClick:()=>e.push("/dashboard/trips/new"),className:"btn-primary flex items-center",children:[r.jsx(h.Z,{className:"h-4 w-4 mr-2"}),"New Trip"]})]}),i&&r.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-4 mb-6",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),r.jsx("select",{value:m.status||"",onChange:e=>E("status",e.target.value),className:"form-input",children:w.map(e=>r.jsx("option",{value:e.value,children:e.label},e.value))})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Payment Status"}),r.jsx("select",{value:m.paymentStatus||"",onChange:e=>E("paymentStatus",e.target.value),className:"form-input",children:N.map(e=>r.jsx("option",{value:e.value,children:e.label},e.value))})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date Range"}),r.jsx("input",{type:"date",value:m.dateRange?.start||"",onChange:e=>E("dateRange",e.target.value?JSON.stringify({start:e.target.value,end:m.dateRange?.end||""}):""),className:"form-input",placeholder:"Start date"})]}),r.jsx("div",{className:"flex items-end",children:r.jsx("button",{onClick:()=>C({}),className:"btn-secondary",children:"Clear Filters"})})]})}),c.length>0?(0,r.jsxs)(r.Fragment,{children:[r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-6",children:c.map(e=>r.jsx(k,{trip:e,onEdit:A,onView:L,onStatusChange:M,onPaymentStatusChange:I},e._id))}),o.pages>1&&(0,r.jsxs)("div",{className:"flex items-center justify-between border-t border-gray-200 bg-white px-4 py-3 sm:px-6",children:[(0,r.jsxs)("div",{className:"flex flex-1 justify-between sm:hidden",children:[r.jsx("button",{onClick:()=>R(o.page-1),disabled:1===o.page,className:"relative inline-flex items-center rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50",children:"Previous"}),r.jsx("button",{onClick:()=>R(o.page+1),disabled:o.page===o.pages,className:"relative ml-3 inline-flex items-center rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50",children:"Next"})]}),(0,r.jsxs)("div",{className:"hidden sm:flex sm:flex-1 sm:items-center sm:justify-between",children:[r.jsx("div",{children:(0,r.jsxs)("p",{className:"text-sm text-gray-700",children:["Showing"," ",r.jsx("span",{className:"font-medium",children:(o.page-1)*o.limit+1})," ","to"," ",r.jsx("span",{className:"font-medium",children:Math.min(o.page*o.limit,o.total)})," ","of ",r.jsx("span",{className:"font-medium",children:o.total})," trips"]})}),r.jsx("div",{className:"flex space-x-2",children:Array.from({length:o.pages},(e,t)=>t+1).map(e=>r.jsx("button",{onClick:()=>R(e),className:(0,v.cn)("relative inline-flex items-center px-4 py-2 text-sm font-medium rounded-md",e===o.page?"bg-primary-600 text-white":"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50"),children:e},e))})]})]})]}):r.jsx(j.Z,{title:"No trips found",description:"Start by creating your first trip booking.",actionLabel:"New Trip",onAction:()=>e.push("/dashboard/trips/new"),icon:d.Z})]})]})}},4378:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(8570).createProxy)(String.raw`/Users/mac/Desktop/degima/arwa-park/frontend/app/dashboard/trips/page.tsx#default`)},3401:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});var r=s(7577);let a=r.forwardRef(function({title:e,titleId:t,...s},a){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},s),e?r.createElement("title",{id:t},e):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))})},6421:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});var r=s(7577);let a=r.forwardRef(function({title:e,titleId:t,...s},a){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},s),e?r.createElement("title",{id:t},e):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))})},4526:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});var r=s(7577);let a=r.forwardRef(function({title:e,titleId:t,...s},a){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},s),e?r.createElement("title",{id:t},e):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v12m-3-2.818.879.659c1.171.879 3.07.879 4.242 0 1.172-.879 1.172-2.303 0-3.182C13.536 12.219 12.768 12 12 12c-.725 0-1.45-.22-2.003-.659-1.106-.879-1.106-2.303 0-3.182s2.9-.879 4.006 0l.415.33M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))})}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[558,951,385,464,513,924],()=>s(3539));module.exports=r})();